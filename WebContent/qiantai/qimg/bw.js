SWFObject_baidu=function(a,b){this.cid=b;this.swfId=a.id;this.options=a;this.asObjects={};this.onLoadInit=function(){};SWFObject_baidu.instances[this.swfId]=this};SWFObject_baidu.prototype.load=function(){((window.BDBridge&&window.BDBridge.Lib)||window.baidu).swf.create(this.options,this.cid)};SWFObject_baidu.prototype.getASObject=function(a){return this.asObjects[a.asoId]};SWFObject_baidu.prototype.registerASObject=function(c){var b=c.asoId;var a=this.swfId;return this.asObjects[b]=new ASObject_baidu({asoId:b,swfId:a})};SWFObject_baidu.prototype.getASObjectProperty=function(a){if(this.swf==null){this.swf=document[this.swfId]||window[this.swfId]}return this.swf.getASObjectProperty(a)};SWFObject_baidu.prototype.setASObjectProperty=function(a){if(this.swf==null){this.swf=document[this.swfId]||window[this.swfId]}this.swf.setASObjectProperty(a)};SWFObject_baidu.prototype.callASObjectMethod=function(a){if(this.swf==null){this.swf=document[this.swfId]||window[this.swfId]}return this.swf.callASObjectMethod(a)};SWFObject_baidu.instances={};SWFObject_baidu.getSWFObject=function(a){return SWFObject_baidu.instances[a.swfId]};SWFObject_baidu.dispatchASObjectEvent=function(e){var d=e.swfId;var c=e.asoId;var f=e.type;var h=e.data;var a=SWFObject_baidu.getSWFObject({swfId:d});var b=(c==undefined)?a:a.getASObject({asoId:c});var j="on"+f.substr(0,1).toUpperCase()+f.substr(1);if(b[j]!=null){b[j](h)}};SWFObject_baidu.registerASObject=function(d){var c=d.swfId;var b=d.asoId;var a=SWFObject_baidu.getSWFObject(d);a.registerASObject(d)};ASObject_baidu=function(a){this.swfId=a.swfId;this.asoId=a.asoId;this.swfObject=SWFObject_baidu.getSWFObject(a);if(ASObject_baidu.instances[this.swfId]==null){ASObject_baidu.instances[this.swfId]={}}ASObject_baidu.instances[this.swfId][this.asoId]=this};ASObject_baidu.prototype.get=function(a){return this.swfObject.getASObjectProperty({asoId:this.asoId,property:a})};ASObject_baidu.prototype.set=function(b,a){this.swfObject.setASObjectProperty({asoId:this.asoId,property:b,value:a})};ASObject_baidu.prototype.call=function(b,a){return this.swfObject.callASObjectMethod({asoId:this.asoId,method:b,parameters:a})};ASObject_baidu.instances={};window.baiduLS=window.baiduLS||{version:"1-0-0"};baiduLS.localStorage=baiduLS.localStorage||{mobile:function(){var a=navigator.userAgent;return !!a.match(/.*Mobile.*/)||("ontouchstart" in window)}(),onLoadInit:function(){}};baiduLS.localStorage.load=function(a,c){if(baiduLS.localStorage.mobile){if(baiduLS.localStorage.onLoadInit){baiduLS.localStorage.onLoadInit()}return}baiduLS.localStorage.so=new SWFObject_baidu(a,c);var b=baiduLS.localStorage.so;b.onLoadInit=function(d){baiduLS.localStorage.ao=b.asObjects.localStorage;if(baiduLS.localStorage.onLoadInit){baiduLS.localStorage.onLoadInit()}};b.load()};baiduLS.localStorage.read=function(b,a){if(baiduLS.localStorage.mobile){return window.localStorage.getItem(b+"_"+a)}return baiduLS.localStorage.ao.call("read",[b,a])};baiduLS.localStorage.write=function(c,a,b){if(baiduLS.localStorage.mobile){return window.localStorage.setItem(c+"_"+a,b)}return baiduLS.localStorage.ao.call("write",[c,a,b])};baiduLS.localStorage.remove=function(b,a){if(baiduLS.localStorage.mobile){return window.localStorage.removeItem(b+"_"+a)}return baiduLS.localStorage.ao.call("remove",[b,a])};baiduLS.localStorage.clear=function(b){if(baiduLS.localStorage.mobile){for(var a in window.localStorage){if(window.localStorage.hasOwnProperty(i)&&i.indexOf(b)==0){window.localStorage.setItem(b+"_"+key,"")}}return}return baiduLS.localStorage.ao.call("clear",[b])};var BDBridgeStat=(function(){var d={siteId:"",mainId:""};var o={mainId:"",subId:"",sessionId:"",eventId:"",chatId:"",from:"",open:"",valid:"",count:""};var r="http://hm.baidu.com/hm.gif";var n=0;var c="&nv=0&st=4&v=bridge-0.2&rnd=";var l={};var s={REFRESH_IM:1,SEND_INVITE:3,ACCEPT_INVITE:4,SEND_MESS:5,VISITOR_IM:6,SERVER_IM:7,START_IM:0};var b=["subId","sessionId","eventId","chatId","from","open","valid","count"];var j={visitor_count:0};function m(){return Math.floor(Math.random()*10000000000)}function h(v){var t=new Image();var u=r+"?"+v;t.onload=t.onerror=function(){t=null};t.src=u}function k(v,t){for(var u in v){if(v.hasOwnProperty(u)){t[u]&&(v[u]=t[u])}}}function a(t){var u="si="+d.siteId+"&et=99&ep="+d.mainId;u=u+e(t);u=u+c+m();h(u)}function e(u){var w;var x;var v="";var t=b.length;for(w=0;w<t;w++){x=b[w];v+=u[x]===""?("*"+n):("*"+u[x])}return v}function p(t){if(j.visitor_count){k(o,t);o.eventId=s.VISITOR_IM;o.count=j.visitor_count;o.valid=1;a(o);j.visitor_count=0;o.valid=0}}function f(t){if(!t.chatId){j.visitor_count+=t.count}else{k(o,t);o.eventId=s.VISITOR_IM;o.valid=1;a(o);j.visitor_count=0;o.valid=0}}return function(v,u,t){if(!v){return}d.siteId=d.siteId||u.siteId||0;d.mainId=d.mainId||u.mainId||0;v=v.toUpperCase();switch(v){case"VISITOR_IM":f(t);break;case"START_IM":p(t);break;default:k(o,t);o.eventId=s[v];a(o)}}}());var BDBridge=window.BDBridge||{};BDBridge.rcvbase=BDBridge.rcvbase||(function(){var l;var j=BDBridge.BD_BRIDGE_RCV_ROOT,c=BDBridge.BD_BRIDGE_DATA,h=BDBridge.BD_BRIDGE_INVITE,b,e;var a={monitored:false,entered:false,group_data:null,zhixin:"",ls:null,lsId:"bridge",lsKey:{bid:BDBridge.BD_BRIDGE_DATA.siteid+"bid24",data:BDBridge.BD_BRIDGE_DATA.siteid+"data",last:BDBridge.BD_BRIDGE_DATA.siteid+"last",show:BDBridge.BD_BRIDGE_DATA.siteid+"show",instance:BDBridge.BD_BRIDGE_DATA.siteid+"instance",chat:BDBridge.BD_BRIDGE_DATA.siteid+"chat",startload:BDBridge.BD_BRIDGE_DATA.siteid+"startload"},reportTimer:null,reportInviteStatus:0,group_callback_list:[],refresh_callback_list:[],autoInvite_callbacklist:[],monitor_callback_list:[],reject_callback_list:[],enter_callback_list:[]};var k={HOLMES_REPORT_URL:"http://hm.baidu.com/hm.gif"};var d=BDBridgeStat;var f={setCookie:function(m,o,n){if(n){BDBridge.Lib.cookie.setRaw(m+c.siteid,o,{expires:n*60*1000})}else{BDBridge.Lib.cookie.setRaw(m+c.siteid,o)}},getCookie:function(m){var n=BDBridge.Lib.cookie.getRaw(m+c.siteid);return n},getTimeZone:function(){var n=new Date().getTimezoneOffset();var m=parseInt(n/60);var p=n%60;var o="-";if(m<0||p<0){o="+";m=-m;if(p<0){p=-p}}m=m+"";p=p+"";return"UTC"+o+m+":"+p},getParams:function(){var o=window.navigator;var m=window.screen;var n={};n.lang=o.language||o.systemLanguage;n.rsl=m.width+"*"+m.height;n.tz=f.getTimeZone();n.cbit=m.colorDepth;return n},enter:function(){c=c?c:BDBridge.BD_BRIDGE_DATA;if(!a.entered){a.entered=true;if(BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.bid)==null){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.bid,"")}c.bid=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.bid);c.bid=c.bid!=null?c.bid:"";c.location=window.location.href;c.title=document.title.substring(0,100).replace(/\r|\n/g,"");var n=(document.referrer.indexOf("cpro.baidu.com")==-1)?document.referrer:f.__getCproSrc(document.referrer);var x=n;var t=window.location.host;if(x==""){if(f.getCookie("BRIDGE_R")){x=f.getCookie("BRIDGE_R")}else{f.setCookie("BRIDGE_R",x)}}else{if(x.indexOf(t)==-1){if(x.indexOf(".baidu.com")>0){f.setCookie("BRIDGE_R",x,10)}else{if(f.getCookie("BRIDGE_R")){x=f.getCookie("BRIDGE_R")}else{f.setCookie("BRIDGE_R",x)}}}else{x=f.getCookie("BRIDGE_R");if(x==null){x=n}}}c.referrer=x;var u=["baidu.com","baidu.com","google.com","google.cn","bing.com","search.live.com","search.yahoo.com","one.cn.yahoo.com","sogou.com","gougou.com","youdao.com","soso.com","zhongsou.com","search.114.vnet.cn"];var w=["wd","word","q","q","q","q","p","p","query","search","q","w","w","kw"];var v=["gbk","gbk","utf8","utf8","utf8","utf8","utf8","utf8","gbk","utf8","utf8","gbk","gbk","gbk"];c.word="";c.coding="";for(var s=0,p=u.length;s<p;s++){if(n.indexOf(u[s])==-1){continue}else{c.word=BDBridge.Lib.url.parseQuery(n,w[s]);c.word=c.word!=null?c.word:"";c.coding=v[s];break}}c.bdclkid=BDBridge.Lib.url.parseQuery(window.location.href,"bdclkid");c.bdclkid=c.bdclkid!=null?c.bdclkid:"";var y=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.firstInfo)||"{}";y=BDBridge.Lib.json.parse(y);var m=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo)||"{}";m=BDBridge.Lib.json.parse(m);b=new Date().getTime();j=j?j:BDBridge.BD_BRIDGE_RCV_ROOT;var o="Enter.php?callback=BDBridge.rcvbase.__handleEnter&siteid="+c.siteid+"&bid="+c.bid+"&referrer="+encodeURIComponent(c.referrer)+"&word="+encodeURIComponent(c.word)+"&coding="+c.coding+"&bdclkid="+c.bdclkid+"&title="+encodeURIComponent(c.title)+"&lv="+(m.lv||"0")+"&lc="+(m.lc||"0")+"&ls="+(m.ls||"")+"&lvp="+(m.lvp||"0")+"&vis_type="+(BDBridge.Lib.mobile?2:3)+"&ftime="+(y.ft||"0")+"&fs="+(y.fs||"")+"&ltime="+(m.lt||"0")+"&"+BDBridge.Lib.parseUrlParam(f.getParams())+"&t="+(new Date()).getTime().toString();BDBridge.Lib.loadScript("BDBridgeSendData",j.replace("rqiao.baidu.com","r.qiao.baidu.com")+o)}},__getCproSrc:function(m){var o=BDBridge.Lib.url.parseQuery(m,"word");var n=BDBridge.Lib.url.parseQuery(m,"u");if(o!=null&&n==null){m=o}else{if(o==null&&n!=null){m=n}else{return""}}m=m.replace(/%3A/gi,":").replace(/%2F/gi,"/").replace(/%3F/gi,"?");m=m.replace(/(((http|https):\/\/)?[\w\.-]+)(\/|\?)?\S*/i,"$1");if(m.search(/^(http|https):\/\//i)==-1){m="http://"+m}return m},startMonitor:function(){if(!a.monitored){f.enter();a.monitored=true}},_convertGroup:function(x){if(!x){return[]}var p=x.length;var y=0;var z="";var m="";var v="";for(var w=0;w<p;w++){if(x[w]["user"].length>0){y++;z=x[w]["groupid"];m=x[w]["groupname"];v=w}}if(y==0){return[]}if(y==1){var u=0;var s=x[v]["user"];for(var t=0,o=s.length;t<o;t++){if((s[t]["islogin"]-0)!=0){u=1;break}}x[v].online=u}else{for(var t=0;t<p;t++){var s=x[t]["user"];if(s.length!=0){var u=0;for(var r=0,o=s.length;r<o;r++){if((s[r]["islogin"]-0)!=0){u=1;break}}x[t].online=u}}}return x},__doGroup:function(m){a.group_callback_list.push(m);if(a.group_data){f.__handleEnter(a.group_data)}else{f.enter()}},doAutoInvite:function(m){a.autoInvite_callbacklist.push(m)},doInvite:function(m){a.refresh_callback_list.push(m);f.startMonitor()},stopMonitor:function(){if(a.monitored){f._leave();a.monitored=false}},_getAuthorityGroup:function(u){var s=BDBridge.BD_BRIDGE_GROUP,n=[],v=s.length,r=u.length,t,m,o,p;for(o=0;o<v;o++){m=s[o];for(p=0;p<r;p++){t=u[p];if(t.groupid==m){n.push(t);break}}}return n},__handleEnter:function(p){c=c?c:BDBridge.BD_BRIDGE_DATA;var r=[];h=BDBridge.BD_BRIDGE_INVITE;BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.bid,p.bid);c.bid=p.bid;c.from=p.from;c.word=p.word;c.wordid=p.wordid;c.wordtype=p.wordtype;if(typeof p.zhixin!="undefined"&&p.zhixin!==""){a.zhixin=p.zhixin;BDBridge.BD_BRIDGE_WEBIM.webimopentype=0}if(typeof p.service_type!="undefined"&&p.service_type>0){a.servicetype=p.service_type}r=f._getAuthorityGroup(p.group);c.group=f._convertGroup(r);(function(){if(BDBridge.Lib.mobile&&(BDBridge.BD_BRIDGE_ICON_CONFIG.iconlvtype==0||BDBridge.BD_BRIDGE_INVITE.inviteauto==1)){var u=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo)||"{}";u=BDBridge.Lib.json.parse(u);var v=u.ls||"";var t=BDBridge.BD_BRIDGE_ROOT+"?module=default&controller=webim&action=visdistribute";var w="&siteid="+c.siteid+"&groupid=&groupname=&from="+encodeURIComponent(c.from)+"&lastsubid="+v+"&callback=BDBridge.Lib.webim.handleVisDistribute";BDBridge.Lib.loadScript("BDBridgeVisDistribute",t+w)}}());var o=BDBridge.Lib.json,n=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo)||"{}";n=o.parse(n);n.lv=p.lv||0;n.lvp=p.lvp||0;n.lt=p.ltime||0;BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo,o.stringify(n));var s=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.firstInfo)||"{}";s=o.parse(s);s.ft=p.ftime||0;BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.firstInfo,o.stringify(s));if(BDBridge.Lib.cookie.getRaw("BRIDGE_REFRESH")==null){if(h.invitemanual==1){BDBridge.Lib.cookie.setRaw("BRIDGE_REFRESH",5000)}else{BDBridge.Lib.cookie.setRaw("BRIDGE_REFRESH",15000)}}if(p.saved==1){a.entered=true;if(BDBridge.Lib.cookie.getRaw("BRIDGE_CLOCK")==null){BDBridge.Lib.cookie.setRaw("BRIDGE_CLOCK",(new Date()).getTime())}BDBridge.Lib.cookie.setRaw("BRIDGE_NEED",1);a.reportTimer=setInterval(BDBridge.rcvbase.__refresh,500);var m=a.enter_callback_list.length;while(m--){a.enter_callback_list[m].call(null,c,p.group)}}else{if(p.saved==0){a.entered=false;f.enter()}}var m=a.group_callback_list.length;while(m--){a.group_callback_list[0](p.group);a.group_callback_list.shift()}a.group_data=p.group;if(h.inviteauto!=0){if(h.invitetype==0){if(BDBridge.Lib.cookie.getRaw("BRIDGE_INVITE_1")==null){BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_1",0)}if(BDBridge.Lib.cookie.getRaw("BRIDGE_INVITE_1")==0){BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_1",1)}else{return}}var m=a.autoInvite_callbacklist.length;while(m--){a.autoInvite_callbacklist[0](p.group);a.autoInvite_callbacklist.shift()}}},__refresh:function(){j=j?j:BDBridge.BD_BRIDGE_RCV_ROOT;c=c?c:BDBridge.BD_BRIDGE_DATA;if(BDBridge.Lib.cookie.getRaw("BRIDGE_NEED")==1){if((new Date()).getTime()-BDBridge.Lib.cookie.getRaw("BRIDGE_CLOCK")>=BDBridge.Lib.cookie.getRaw("BRIDGE_REFRESH")){var m="Refresh.php?callback=BDBridge.rcvbase.__handleRefresh&bid="+c.bid+"&siteid="+c.siteid+"&t="+(new Date()).getTime().toString();BDBridge.Lib.loadScript("BDBridgeReport",j+m);BDBridge.Lib.cookie.setRaw("BRIDGE_CLOCK",(new Date()).getTime())}}else{clearInterval(a.reportTimer)}},__handleRefresh:function(r){if(r.saved==0){BDBridge.Lib.cookie.setRaw("BRIDGE_NEED",0)}var o=a.refresh_callback_list,m=o.length,n=0;if(r.status==1&&!a.reportInviteStatus){d("SEND_INVITE",{siteId:c.SITE_ID,mainId:c.mainid},{subId:r.subid||0,open:1});var p=a.zhixin==""?"":("&orderKey="+encodeURIComponent(a.zhixin));var s=a.servicetype==undefined?"":("&servicetype="+encodeURIComponent(a.servicetype));BDBridge.Lib.imgRequest(BDBridge.BD_BRIDGE_ROOT+"statlog/stat.gif?","siteid="+c.siteid+"&type=invite"+p+s+"&t="+(+new Date()));a.reportInviteStatus=1}else{if(r.status!=1){a.reportInviteStatus=0}}while(n<m){o[n](r);n++}},reject:function(p){j=j?j:BDBridge.BD_BRIDGE_RCV_ROOT;c=c?c:BDBridge.BD_BRIDGE_DATA;var n=new Image();var o="bid="+c.bid+"&siteid="+c.siteid+"&t="+(new Date()).getTime().toString();n.src=j+"Reject.php?"+o;n.onload=function(){};a.reject_callback_list.push(p);var m=a.reject_callback_list.length;while(m--){a.reject_callback_list[0]();a.reject_callback_list.shift()}},_leave:function(){j=j?j:BDBridge.BD_BRIDGE_RCV_ROOT;c=c?c:BDBridge.BD_BRIDGE_DATA;if(c.bid!=undefined){var m=new Image();var n="bid="+c.bid+"&siteid="+c.siteid+"&t="+(new Date()).getTime().toString();m.onload=function(){};m.src=j+"Leave.php?"+n}}};return l={__doGroup:f.__doGroup,__handleEnter:f.__handleEnter,__refresh:f.__refresh,__handleRefresh:f.__handleRefresh,startMonitor:f.startMonitor,stopMonitor:f.stopMonitor,doInvite:f.doInvite,doAutoInvite:f.doAutoInvite,reject:f.reject,getOrderKey:function(){return a.zhixin},addRefreshHandler:function(m){a.refresh_callback_list.push(m)},addEnterHandler:function(m){a.enter_callback_list.push(m)}}})();var BDBridge=window.BDBridge||{};BDBridge.group=BDBridge.group||(function(){var c;var e=BDBridge.BD_BRIDGE_DATA;var a={SCHEME:{policy:function(h,f){},random:function(h,f){return b.__getRandomGroup(h)}},POLICY:{address:function(){return 2},familiarity:function(){return 1}},SCHEME_INFO:"random",POLICY_INFO:[]};var d={onlineGroup:null,offlineGroup:null,group:e.group};var b={_getPolicy:function(m,j){len=m.length,maxValue=0;var k=0;var n="";var l,h;for(var f=0;f<len;f++){l=0;for(h in policy_info){l+=a.POLICY[POLICY_INFO[h]]()}if(l>maxValue){maxValue=l;k=m[f]["groupid"];n=m[f]["groupname"]}}return({groupid:k,groupname:n})},_convertGroup:function(t){var h=t.length;var u=0;var r="";d.onlineGroup=[];d.offlineGroup=[];for(var s=0;s<h;s++){if(t[s]["user"].length>0){u++;tempId=t[s]["groupid"];tempName=t[s]["groupname"];r=s}}if(u==0){d.onlineGroup=null;d.offlineGroup=null}else{if(u==1){var p=0;var m=t[r]["user"];for(var o=0,f=m.length;o<f;o++){if((m[o]["islogin"]-0)!=0){p=1;break}}if(p){d.onlineGroup.push(r)}else{d.offlineGroup.push(r)}}else{for(var o=0;o<h;o++){var m=t[o]["user"];if(m.length!=0){var p=0;for(var k=0,f=m.length;k<f;k++){if((m[k]["islogin"]-0)!=0){p=1;break}}if(p){d.onlineGroup.push(o)}else{d.offlineGroup.push(o)}}}}}},__getRandomGroup:function(k){if(!d.onlineGroup||!d.offlineGroup){b._convertGroup(k)}if(d.onlineGroup){return{}}var h=d.onlineGroup.length;var f=d.offlineGroup.length;var j=(h-0!=0)?d.onlineGroup[BDBridge.Lib.getRandom(0,h)]:d.offlineGroup[BDBridge.Lib.getRandom(0,f)];var l=e.group[j];return{groupid:l.groupid,groupname:l.groupname}}};return c={getGroupData:function(f){BDBridge.rcvbase.__doGroup(f)},getGroupObj:function(h,f){return a.SCHEME[a.SCHEME_INFO](h,f)}}})();var BDBridge=window.BDBridge||{};BDBridge.Icon=BDBridge.Icon||(function(){var s;var n,b,h,j='<iframe id="BDBridgeIconIframe" src="about:blank" frameborder="0" marginheight="0" marginwidth="0" style="display:none;_filter:alpha(opacity=0);"></iframe><div id="IconContainer"><div id = "bridgehead"><div class = "bdbridge-icon-head" style="z-index:2147483647;" id="bdbridgeIconBg"></div><div id = "bridgeopacity"></div></div><div id ="bridgebottom" style="position:relative;"><div class="bdbridge-icon-left" style="position:absolute;left:0px;top:0;zoom:1;"><div id="bdbridge-left-close" style="cursor:pointer;"></div></div><div class="bdbridge-icon-right" style="*position:relative;z-index:100;" ><div class = "bdbridge-icon-group" id="IconGp"></div><div class = "bdbridge-icon-bottom" id="BrIcon"></div></div><div style="clear:both;font-size:0;line-height:0;"></div></div></div>',f=false,l,d,m,p,c,o,a={};var r={ROOT:BDBridge.BD_BRIDGE_ROOT+"res/iconbgcolorful/",BG_COLOR:"#F0D9BA",chatType:{byInvite:0,bySelf:1,enforce:5},BDBRIDGE_ICON_SPECIAL:[{left:"0_left.png",right:"0_right.png",lrw:25,lrh:66,close:"0_close.png",closeh:148,closew:92,x:12,dw:143,y:60,bg:"#0fb2cf",w:169,h:104,btn:"#daf8f8",txt:"#318f9f",filename:"0.png",description:"贴心服务"},{left:"1_left.png",right:"1_right.png",lrw:25,lrh:66,close:"1_close.png",closeh:165,closew:82,x:35,dw:143,y:60,bg:"#3e72af",w:200,h:100,btn:"#e7bee6",txt:"#a564ae",filename:"1.png",description:"紫色气泡"},{left:"2_left.png",right:"2_right.png",lrw:30,lrh:30,close:"2_close.png",closeh:133,closew:89,x:5,dw:143,y:8,bg:"#8a4910",w:187,h:61,btn:"#e9b180",txt:"#985b24",filename:"2.png",description:"休闲风格"},{left:"3_left.png",right:"3_right.png",lrw:25,lrh:66,close:"3_close.png",closeh:134,closew:77,x:17,dw:143,y:98,bg:"#c51700",w:174,h:132,btn:"#fbe9c1",txt:"#ed6a5b",filename:"3.png",description:"新年快乐"},{left:"4_left.png",right:"4_right.png",lrw:25,lrh:66,close:"4_close.png",closeh:105,closew:60,x:6,dw:143,y:105,bg:"#732f18",w:155,h:151,btn:"#efc692",txt:"#876252",filename:"4.png",description:"礼品多多"},{left:"5_left.png",right:"5_right.png",lrw:25,lrh:66,close:"5_close.png",closeh:134,closew:61,x:20,dw:143,y:153,bg:"#feb0da",w:189,h:205,btn:"#fbe9c1",txt:"#ed6a5b",filename:"5.png",description:"粉红惊喜"},{left:"6_left.png",right:"6_right.png",lrw:25,lrh:66,close:"6_close.png",closeh:152,closew:66,x:8,dw:143,y:245,bg:"#2f1c21",w:160,h:275,btn:"#f1c995",txt:"#734f40",filename:"6.png",description:"纸醉金迷"},{left:"7_left.png",right:"7_right.png",lrw:23,lrh:66,close:"7_close.png",closeh:133,closew:53,x:12,dw:143,y:117,bg:"#66b821",w:167,h:174,btn:"#fbe9c1",txt:"#ed6a5b",filename:"7.png",description:"缤纷乐园"},{left:"8_left.png",right:"8_right.png",lrw:24,lrh:68,close:"8_close.png",closeh:115,closew:53,x:17,dw:143,y:118,bg:"#e7e7e7",w:182,h:169,btn:"#fef7b4",txt:"#5f574f",filename:"8.png",description:"烂漫童趣"},{left:"9_left.png",right:"9_right.png",lrw:23,lrh:66,close:"9_close.png",closeh:125,closew:44,x:56,dw:143,y:86,bg:"#454641",w:228,h:134,btn:"#fbe9c1",txt:"#ed6a5b",filename:"9.png",description:"二战风云"},{left:"10_left.png",right:"10_right.png",lrw:25,lrh:66,close:"10_close.png",closeh:175,closew:68,x:36,dw:143,y:203,bg:"#ec4b96",w:201,h:217,btn:"#ffb7b7",txt:"#9d6980",filename:"10.png",description:"灯绿酒红"},{left:"11_left.png",right:"11_right.png",lrw:25,lrh:66,close:"11_close.png",closeh:136,closew:74,x:9,dw:143,y:136,bg:"#53b2ea",w:176,h:160,btn:"#cceefe",txt:"#1171c8",filename:"11.png",description:"森林雪人"},{left:"12_left.png",right:"12_right.png",lrw:25,lrh:66,close:"12_close.png",closeh:62,closew:116,x:72,dw:143,y:85,bg:"#6f9d1f",w:233,h:130,btn:"#d7f2a8",txt:"#5d8958",filename:"12.png",description:"可爱绿蛙"},{left:"13_left.png",right:"13_right.png",lrw:25,lrh:66,close:"13_close.png",closeh:148,closew:74,x:6,dw:143,y:114,bg:"#e6224c",w:174,h:141,btn:"#f2d0d3",txt:"#d86767",filename:"13.png",description:"可爱鸟儿"},{left:"14_left.png",right:"14_right.png",lrw:25,lrh:66,close:"14_close.png",closeh:114,closew:67,x:0,dw:143,y:60,bg:"#2968af",w:159,h:112,btn:"#c1daf4",txt:"#318f9f",filename:"14.png",description:"商务沟通"},{left:"15_left.png",right:"15_right.png",lrw:25,lrh:66,close:"15_close.png",closeh:142,closew:85,x:0,dw:143,y:60,bg:"#af2991",w:163,h:104,btn:"#f7b9d8",txt:"#cd469d",filename:"15.png",description:"酷炫镁光"},{left:"16_left.png",right:"16_right.png",lrw:25,lrh:66,close:"16_close.png",closeh:131,closew:73,x:10,dw:143,y:54,bg:"#6f5915",w:174,h:100,btn:"#d3c188",txt:"#978855",filename:"16.png",description:"咖啡早报"},{left:"17_left.png",right:"17_right.png",lrw:30,lrh:71,close:"17_close.png",closeh:123,closew:66,x:7,dw:143,y:90,bg:"#c01814",w:165,h:127,btn:"#f9ca94",txt:"#dc9764",filename:"17.png",description:"圣诞大礼"},{left:"18_left.png",right:"18_right.png",lrw:25,lrh:66,close:"18_close.png",closeh:121,closew:73,x:12,dw:143,y:75,bg:"#055f19",w:160,h:119,btn:"#fbe9c1",txt:"#ed6a5b",filename:"18.png",description:"圣诞大礼"},{left:"19_left.png",right:"19_right.png",lrw:30,lrh:73,close:"19_close.png",closeh:170,closew:78,x:14,dw:143,y:120,bg:"#53b2ea",w:180,h:134,btn:"#ffc3bb",txt:"#d3232c",filename:"19.png",description:"温暖情怀"},{left:"20_left.png",right:"20_right.png",lrw:30,lrh:71,close:"20_close.png",closeh:136,closew:61,x:5,dw:143,y:115,bg:"#c01814",w:166,h:144,btn:"#f9ca94",txt:"#dc9764",filename:"20.png",description:"摇摆挂饰"},{left:"21_left.png",right:"21_right.png",lrw:30,lrh:54,close:"21_close.png",closeh:171,closew:107,x:24,dw:143,y:91,bg:"#2aaf0c",w:180,h:141,btn:"#fbe9c1",txt:"#ed6a5b",filename:"21.png",description:"果绿青春"},{left:"22_left.png",right:"22_right.png",lrw:23,lrh:66,close:"22_close.png",closeh:136,closew:88,x:31,dw:143,y:77,bg:"#402810",w:206,h:128,btn:"#c0a888",txt:"#49301d",filename:"22.png",description:"国风书香"},{left:"23_left.png",right:"23_right.png",lrw:25,lrh:66,close:"23_close.png",closeh:177,closew:90,x:4,dw:143,y:160,bg:"#1152bf",w:178,h:195,btn:"#a5caff",txt:"#6f5a60",filename:"23.png",description:"蓝月亮"},{left:"24_left.png",right:"24_right.png",lrw:25,lrh:66,close:"24_close.png",closeh:179,closew:101,x:35,dw:143,y:92,bg:"#cab7f9",w:220,h:140,btn:"#ffc3bb",txt:"#d06369",filename:"24.png",description:"紫色迷情"},{left:"25_left.png",right:"25_right.png",lrw:25,lrh:66,close:"25_close.png",closeh:143,closew:88,x:14,dw:143,y:104,bg:"#0fb2cf",w:165,h:143,btn:"#a8e0f1",txt:"#2e93c2",filename:"25.png",description:"田园路牌"},{left:"26_left.png",right:"26_right.png",lrw:25,lrh:66,close:"26_close.png",closeh:188,closew:95,x:21,dw:143,y:104,bg:"#495a38",w:195,h:155,btn:"#d2e8b9",txt:"#6c8156",filename:"26.png",description:"水墨荷塘"},{left:"27_left.png",right:"27_right.png",lrw:25,lrh:66,close:"27_close.png",closeh:134,closew:115,x:34,dw:143,y:84,bg:"#C61700",w:197,h:133,btn:"#FDF9EC",txt:"#EC6B65",filename:"27.png",description:"龙年吉祥"},{left:"28_left.png",right:"28_right.png",lrw:25,lrh:66,close:"28_close.png",closeh:180,closew:120,x:43,dw:143,y:148,bg:"#194431",w:250,h:190,btn:"#e5f6fe",txt:"#1574c8",filename:"28.png",description:"免费试学"},{left:"29_left.png",right:"29_right.png",lrw:25,lrh:66,close:"29_close.png",closeh:148,closew:115,x:39,dw:143,y:118,bg:"#c61800",w:222,h:170,btn:"#fdf7e9",txt:"#e96757",filename:"29.png",description:"财神到"},{left:"30_left.png",right:"30_right.png",lrw:25,lrh:66,close:"30_close.png",closeh:165,closew:106,x:36,dw:143,y:148,bg:"#C51700",w:215,h:139,btn:"#FDF8EC",txt:"#ED6A5B",filename:"30.png",description:"金蛇报喜"},{left:"31_left.png",right:"31_right.png",lrw:25,lrh:66,close:"31_close.png",closeh:148,closew:115,x:16,dw:143,y:118,bg:"#C51700",w:175,h:173,btn:"#FDF8EC",txt:"#ED6A5B",filename:"31.png",description:"吉庆有余"}],SYS_ICON_BG:[{filename:"01.png",description:"花朵绽放",bgcolor:"#3290cd"},{filename:"02.png",description:"蓝海战略",bgcolor:"#275f87"},{filename:"03.png",description:"办公商务",bgcolor:"#3d6a7f"},{filename:"04.png",description:"青春纪念",bgcolor:"#71874c"},{filename:"05.png",description:"开卷有益",bgcolor:"#a09a80"},{filename:"06.png",description:"海滨小镇",bgcolor:"#a08f72"},{filename:"07.png",description:"绿海沙滩",bgcolor:"#826a6d"},{filename:"08.png",description:"长天翱翔",bgcolor:"#406e9e"},{filename:"09.png",description:"气球旅行",bgcolor:"#93c4eb"},{filename:"10.png",description:"健康宝贝",bgcolor:"#e9dee1"},{filename:"11.png",description:"夏日麦田",bgcolor:"#db9544"},{filename:"12.png",description:"蝶舞纷飞",bgcolor:"#2990be"},{filename:"13.png",description:"鱼戏牡丹",bgcolor:"#ece6cd"},{filename:"14.png",description:"绿色商务",bgcolor:"#6c8626"},{filename:"15.png",description:"康乃馨香",bgcolor:"#f1cdcd"},{filename:"16.png",description:"健康之源",bgcolor:"#e3dee0"}],containerId:""};var e={handleMessList:[]};var k={__formatIcon:function(){b.special=r.BDBRIDGE_ICON_SPECIAL[b.special];b.background.url="";b.background.color=b.special.bg;b.head.url="";b.head.width=b.special.w;b.head.height=b.special.h;b.button.url="";b.button.color=b.special.btn;b.button.text=b.special.txt},_convertGroup:function(x){var y=x;var u=[];var v;var t=y.length;var w;for(v=0;v<t;v++){w=y[v];if(w&&w.user&&w.user.length>0){u.push(w)}}return u},_compat:function(){if(BDBridge.Lib.ie&&l("spanThemeBegin")){l("BDBridgeWrap").innerHTML="";_createIcon()}},_createIcon:function(){var v=l("BDBridgeWrap")||l("BDBridgeNewWrap"),u,t;if(!v){v=document.createElement("div");v.id="BDBridgeWrap"}if(b.flow==0){if(l("BDBridgeFixedWrap")){r.containerId="BDBridgeFixedWrap";l("BDBridgeFixedWrap").style.textAlign="left"}else{return}}else{r.containerId="BDBridgeIconWrap";u=document.createElement("div");u.id=r.containerId;u.style.textAlign="left";v.appendChild(u)}t=l(r.containerId);t.innerHTML=j;t.style.display="none";l("BDBridgeLS").style.background="#eee"},_expanIcon:function(){var v=l("bdbridge-left-close"),C=d("bdbridge-icon-right","BDBridgeWrap")[0]||d("bdbridge-icon-right","BDBridgeFixedWrap")[0],x=d("bdbridge-icon-left","BDBridgeWrap")[0]||d("bdbridge-icon-left","BDBridgeFixedWrap")[0],E=x.style.cssFloat,y=l("bridgehead"),z=l("bridgebottom"),u=b,w=l(r.containerId),A=u.position,t=u.flow,F=[],B=0;if(!f){C.style.visibility="hidden";y.style.visibility="hidden";a.container_width=w.style.width;a.container_height=w.style.height;a.bottom_left=z.style.left;a.bottom_marginleft=z.style.marginLeft;w.style.overflow="hidden";if(t!=2){if(A==0||A==2||A==4){v.className=" bdbridge-left-hd-img"}else{v.className=" bdbridge-right-hd-img"}w.style.width="25px";w.style.height="68px";z.style.top=-y.offsetHeight+"px"}else{F=r.BDBRIDGE_ICON_SPECIAL[u.special];v.style.width=F.closew+"px";v.style.height=F.closeh+"px";a.leftDivTop=x.style.top;a.leftDivBottom=x.style.bottom;var D=F.close?r.ROOT+F.close:"";if(D){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){v.style.backgroundImage="none";v.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+D+")"}else{v.style.background=o("url(#{0}) no-repeat",D)+""}}w.style.width=F.closew+"px";w.style.height=F.closeh+"px";z.style.top=-y.offsetHeight+"px";z.style.left=0;z.style.marginLeft=0}x.style.position="relative";f=true}else{C.style.visibility="visible";y.style.visibility="visible";w.style.width=a.container_width;w.style.height=a.container_height;w.style.overflow="";z.style.top=0;if(t!=2){if(A==0||A==2||A==4){v.className="bdbridge-left-img";x.style.left=0}else{v.className="bdbridge-right-img"}}else{F=r.BDBRIDGE_ICON_SPECIAL[u.special];v.style.width=F.lrw+"px";v.style.height=F.lrh+"px";x.style.top=a.leftDivTop;x.style.bottom=a.leftDivBottom;z.style.left=a.bottom_left;z.style.marginLeft=a.bottom_marginleft;var D;if(A==0||A==2||A==4){D=F.left?r.ROOT+F.left:""}else{D=F.right?r.ROOT+F.right:""}if(D){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){v.style.backgroundImage="none";v.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+D+")"}else{v.style.background=o("url(#{0}) no-repeat",D)+""}}}x.style.position="absolute";f=false}if(!(A==2||A==4||A==0)){if(x.style&&parseInt(x.style.left,10)==0){x.style.left="";x.style.right=0}else{x.style.right="";x.style.left=0}}if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){k._scroll()}},_hexToRgb:function(u,x){if(x==undefined){x=null}if(u.substr(0,1)=="#"){u=u.substr(1)}var w;var v;var t;if(u.length==3){w=u.substr(0,1);w+=w;v=u.substr(1,1);v+=v;t=u.substr(2,1);t+=t}else{if(u.length==6){w=u.substr(0,2);v=u.substr(2,2);t=u.substr(4,2)}else{return x}}w=parseInt(w,16);v=parseInt(v,16);t=parseInt(t,16);if(isNaN(w)||isNaN(v)||isNaN(t)){return x}else{return{r:w,g:v,b:t}}},setSkin:function(){var w=b,z=w.background,y=z.color,u=z.url,B="#{0} url(#{1})",t=l("bridgehead"),v=w.flow,A;if(v!=2){t.style.backgroundColor=y;t.style.backgroundImage=u?o("url(#{0})",u)+"":""}else{A=r.BDBRIDGE_ICON_SPECIAL[w.special];var x=A.filename?r.ROOT+A.filename:"";if(x){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){t.style.backgroundImage="none";t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+x+")"}else{t.style.background=o("url(#{0})",x)+""}}}},setSize:function(){var J=b,x=J.flow,D=J.head.height,E=J.iconlvtype,u=E==1?24:15,v=l("IconGp"),w=l("bridgeopacity"),B=l("BDBridgeIconIframe"),C=[],y=l("bridgehead"),A=l("bridgebottom"),I=0,t=l(r.containerId),H,F,K,z=J.position,G;if(x!=2){G=(E==0)?0:(z==1||z==3||z==5)?23:25;F=parseInt(J.head.width);btnwidth=(F-20>0)?(F-20):0;y.style.width=F+"px";y.style.height=D+"px";c.style.width=F+G+"px";if(E!=0){v.style.width=F+"px"}w.style.width=F+"px";A.style.width=F+G+"px";A.style.marginLeft=0;B&&(B.style.width=F+G+"px");t.style.width=F+G+"px"}else{H=r.BDBRIDGE_ICON_SPECIAL[J.special];F=parseInt(H.dw);btnwidth=(F-20>0)?(F-20):0;G=H.lrw;y.style.width=H.w+"px";y.style.height=H.h+"px";A.style.width=F+G+"px";if(E!=0){v.style.width=F+"px"}A.style.marginLeft=H.x+"px";c.style.width=F>H.w?F:parseInt(H.w,10)+G+"px";B&&(B.style.width=c.style.width);t.style.width=H.w+G+"px"}C=d("bdbridge-group-item",(x!=0?"BDBridgeWrap":"BDBridgeFixedWrap"));each(C,function(M,L){M.style.width=btnwidth+"px";M.style.height=u+"px";K=M.childNodes[0];K.style.width=btnwidth+"px";K.style.height=u+"px"});ele2=d("bdbridge-user-group-item",(x!=0?"BDBridgeWrap":"BDBridgeFixedWrap"));each(ele2,function(M,L){M.style.width=btnwidth+"px";M.style.height=u+"px";K=M.childNodes[0];K.style.width=btnwidth+"px";K.style.height=u+"px"})},ajustSize:function(){var w=d("bdbridge-icon-left","BDBridgeWrap")[0]||d("bdbridge-icon-left","BDBridgeFixedWrap")[0],x=l("bridgehead").clientHeight,y=l("bridgebottom").offsetHeight,t=l(r.containerId),v=l("BDBridgeIconIframe");var u=b;x=l("bridgehead").clientHeight;if(u.iconlvtype==0){c.style.height=x+"px";v&&(v.style.height=x+"px");t.style.height=x+"px"}else{c.style.height=x+y+"px";v&&(v.style.height=x+y+"px");t.style.height=x+y+"px"}},ajustbackground:function(){var H=b,D=BDBridge.Lib.G,G=D("IconGp"),K=H.background.color,y=D("bridgeopacity"),x=D("bdbridgeIconBg").style.zIndex,z=H.background.url,I=H.background.bgcolor,v=H.flow,B,t,F,u,w,J,E=[],A=[];if(z.indexOf("res/")!=-1){picindex=parseInt(z.substring(z.lastIndexOf("/")+1,z.lastIndexOf(".")),10);picindex=parseInt(picindex,10)-1;B=r.SYS_ICON_BG[picindex].bgcolor?r.SYS_ICON_BG[picindex].bgcolor:r.BG_COLOR}else{B=I?I:r.BG_COLOR}t=k._hexToRgb(B);if(v==2){E=r.BDBRIDGE_ICON_SPECIAL[H.special];G.style.background=E.bg}else{if(t){F=t.r;u=t.g;w=t.b;y.style.display="block";if(!K){G.style.background=B}else{G.style.background=K}A[A.length]=o("background:-moz-linear-gradient(top, rgba(#{0},#{1},#{2},0), rgba(#{0},#{1},#{2},1))",F,u,w);A[A.length]=o("background:-webkit-gradient(linear, 0 0, 0 bottom, from(rgba(#{0},#{1},#{2},0)), to(rgba(#{0},#{1},#{2},1)))",F,u,w);A[A.length]=o("background:-webkit-linear-gradient(0 0, 0 bottom, from(rgba(#{0},#{1},#{2},0)), to(rgba(#{0},#{1},#{2},1)))",F,u,w);A[A.length]=o("background:-o-linear-gradient(top, rgba(#{0},#{1},#{2},0), rgba(#{0},#{1},#{2},1))",F,u,w);A[A.length]=o("background:linear-gradient(to bottom, rgba(#{0},#{1},#{2},0), rgba(#{0},#{1},#{2},1))",F,u,w);y.style.cssText+=";"+A.join(";");y.style.filter=o("alpha(opacity=10 finishopacity=100 style=1 startx=#{0},starty=#{1},finishx=#{2},finishy=#{3}) progid:DXImageTransform.Microsoft.gradient(startcolorstr=#{4},endcolorstr=#{5},gradientType=0)",0,0,0,100,B,B);y.style.zIndex=--x}}if(v==2||K||H.iconlvtype==0){y.style.display="none"}if(H.iconlvtype==0){var C=D("bridgebottom");C.style.display="none"}},setHeadBg:function(){var w=b,v=w.head.url,x=l("bdbridgeIconBg"),t=w.head.height-0,y=l("bridgeopacity"),u=w.flow;if(u!=2){x.style.display="block";x.style.top=t-30+"px";if(v){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){x.style.backgroundImage="none";x.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+v+")"}else{x.style.backgroundImage=o("url(#{0})",v)}}y.style.top=t-40+"px"}else{x.style.display="none"}},createGroup:function(){var M=b,v=M.iconlvtype,z=h.group,J=z?z.length:0,D,C=[],G=[],E=l("IconGp"),u="<div>#{0}#{1}</div>",B='<div class="#{5}" data-groupid="#{1}" data-groupname="#{3}" data-online="#{2}"><div class= "opacitymask"></div><div class="bdbridge-item #{4}"></div><div class="#{6}"><div class="masktxt" title="#{0}">#{0}</div></div></div>',N='<ul class="bdbridge-group">#{0}</ul>',t='<li class = "bdbridge-user-item" data-subid = "#{1}" data-subname = "#{2}" data-groupid = "#{3}" data-groupname ="#{4}" ><div class="bdbridge-item #{5}"></div><div class="bdbridge-item-txt" title="#{0}">#{0}</div><div style="clear:both;font-size:0;height:0;overflow:hidden;"></div></li>',x,y,L,F,A,K,w,I,H;if(J==0){return}if(v==1){for(I=0;I<J;I++){A=z[I];x=A.groupname;y=A.groupid;L=A.online;if(!A.user||A.user.length==0){continue}if(L){C.push(o(u,o(B,x,y,L,x," bdridge-group-img","bdbridge-group-item","bdbridge-item-group-txt")))}else{C.push(o(u,o(B,x,y,L,x," bdridge-group-img-disable","bdbridge-group-item","bdbridge-item-group-txt")))}}E.innerHTML=C.join("");m("IconGp","bdbridge-icon-group");m("IconGp","bdbridge-icon-group")}else{if(v==2){for(I=0;I<J;I++){A=z[I];x=A.groupname;y=A.groupid;D=A.user.length;G=[];for(H=0;H<D;H++){w="";userid=null;K=A.user[H];w=K.subname;userid=K.subid;F=K.islogin;if(F){G.push(o(t,w,userid,w,y,x,"bdridge-user-img"))}else{G.push(o(t,w,userid,w,y,x,"bdridge-user-img-disable"))}}if(D<=0){continue}C.push(o(u,o(B,x,y,L,x,"","bdbridge-user-group-item"),o(N,G.join("")),""))}E.innerHTML=C.join("");m("IconGp","bdbridge-icon-group")}else{E.innerHTML="";p("IconGp","bdbridge-icon-group")}}},getPosition:function(){var u=b,E=h.group,D=document.getElementById("IconContainer"),A=BDBridge.Lib.Q("bdbridge-icon-left","BDBridgeWrap")[0]||d("bdbridge-icon-left","BDBridgeFixedWrap")[0],x=l("bdbridge-left-close"),v=u.iconlvtype,F=d("bdbridge-icon-right","BDBridgeWrap")[0]||d("bdbridge-icon-right","BDBridgeFixedWrap")[0],B=l("bridgebottom"),z=l("bridgehead"),C=parseInt(u.position,10),w=l(r.containerId),t=u.flow,G;w.style.position="absolute";if(t!=0){switch(C){case 0:w.style.top="0";w.style.left="auto";w.style.right="0";w.style.margin="8px 8px 0 0";break;case 1:w.style.top="0";w.style.left="0";w.style.margin="8px 0 0 8px";break;case 2:w.style.top="50%";w.style.left="auto";w.style.right="0";w.style.marginRight="8px";w.style.marginTop=-parseInt(w.clientHeight/2,10)+"px";break;case 3:w.style.top="50%";w.style.left="0";w.style.marginLeft="8px";w.style.marginTop=-parseInt(w.clientHeight/2,10)+"px";break;case 4:w.style.top="auto";w.style.left="auto";w.style.bottom="0";w.style.right="0";w.style.margin="0 8px 8px 0";break;case 5:w.style.top="auto";w.style.bottom="0";w.style.left="0";w.style.margin="0 0 8px 8px";break}}if(!BDBridge.Lib.ie||(BDBridge.Lib.ie6plus&&!BDBridge.Lib.onQuirkMode)){if(t!=0){w.style.position="fixed"}else{w.style.position="relative"}}else{w.style.position="absolute";k._scroll();window.attachEvent("onscroll",k._scroll);window.attachEvent("onresize",k._scroll)}if(v==0){return}if(C==1||C==3||C==5){A.style.left="";A.style.right=0;if(t!=2){x.className=" bdbridge-right-img";F.style.marginRight="23px"}else{G=r.BDBRIDGE_ICON_SPECIAL[u.special];x.style.width=G.lrw+"px";x.style.height=G.lrh+"px";var y=G.right?r.ROOT+G.right:"";if(y){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){x.style.backgroundImage="none";x.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+y+")"}else{x.style.background=o("url(#{0}) no-repeat",y)}}F.style.marginRight=1*G.lrw+"px"}B.style.left=0}else{if(C==0||C==2||C==4){A.style.left=0;A.style.right="";if(t!=2){F.style.marginLeft="25px";x.className=" bdbridge-left-img";z.style.marginLeft="25px"}else{G=r.BDBRIDGE_ICON_SPECIAL[u.special];x.style.width=G.lrw+"px";x.style.height=G.lrh+"px";var y=G.left?r.ROOT+G.left:"";if(y){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){x.style.backgroundImage="none";x.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+y+")"}else{x.style.background=o("url(#{0}) no-repeat",y)}}z.style.marginLeft=1*G.lrw+"px";F.style.marginLeft=1*G.lrw+"px"}}}if(E.length==1&&u.iconlvtype==1){A.style.top="";A.style.bottom=0}if(E.length==1&&u.iconlvtype==2&&E[0].user.length==1){A.style.top="";A.style.bottom=0}},setBtnskin:function(){var I=b,K=I.button,z,F=K.color,D=K.text,x=K.url,u=I.iconlvtype,t=[],E=[],v=I.flow,B=I.special,H=[],J,G=0;if(u==1){t=d("bdbridge-group-item",(v!=0?"BDBridgeWrap":"BDBridgeFixedWrap"));each(t,function(P,N){var M=P.getAttribute("data-groupid"),L=P.getAttribute("data-groupname");P.style.marginTop=10+"px";P.style.height=28+"px";P.style.lineHeight=28+"px";P.style.textAlign="center";J=P.childNodes[0];var O=d("masktxt",P);if(O&&O[0]&&O[0].style){O[0].style.color=v!=2?D:r.BDBRIDGE_ICON_SPECIAL[B].txt}if(v!=2){J.style.backgroundColor=F;J.style.backgroundImage=x?o("url(#{0})",x):"";P.style.color=D}else{H=r.BDBRIDGE_ICON_SPECIAL[B];J.style.backgroundColor=H.btn;P.style.color=H.txt}P.onmouseover=(function(Q){return function(){p(Q,"opacitymask");m(Q,"opacitymaskhover")}})(J);P.onmouseout=(function(Q){return function(){p(Q,"opacitymaskhover");m(Q,"opacitymask")}})(J);P.onclick=(function(R,Q){return function(){k._bridgeIconClick(R,Q)}})(M,L)})}else{if(u==2){var A,y,w,C;t=d("bdbridge-user-group-item",(v!=0?"BDBridgeWrap":"BDBridgeFixedWrap"));each(t,function(N,L){A=N.getAttribute("data-groupid");y=N.getAttribute("data-groupname");N.style.marginTop=10+"px";var M=d("masktxt",N);M=M&&M[0];if(M&&M.style){M.style.color=v!=2?D:r.BDBRIDGE_ICON_SPECIAL[B].btn;return}if(v!=2){N.style.color=D}else{H=r.BDBRIDGE_ICON_SPECIAL[B];N.style.color=H.btn}});E=d("bdbridge-user-item",(v!=0?"BDBridgeWrap":"BDBridgeFixedWrap"));each(E,function(N,L){A=N.getAttribute("data-groupid");y=N.getAttribute("data-groupname");w=N.getAttribute("data-subid");C=N.getAttribute("data-subname");var M=d("bdbridge-item-txt",N);if(M&&M[0]&&M[0].style){M[0].style.color=v!=2?D:r.BDBRIDGE_ICON_SPECIAL[B].btn}if(v!=2){N.style.color=D}else{H=r.BDBRIDGE_ICON_SPECIAL[B];N.style.color=H.btn}if((BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6)||BDBridge.Lib.onQuirkMode){N.onmouseover=(function(O){return function(){m(O,"bdbridge-user-item-hover")}})(N);N.onmouseout=(function(O){return function(){p(O,"bdbridge-user-item-hover")}})(N)}N.onclick=(function(Q,P,O,R){return function(){k._bridgeSubClick(Q,P,O,R)}})(A,y,w,C)})}else{z=l("bridgehead");z.onmouseover=function(){m(this,"bdbridge-bridgehead-hover")};z.onmouseout=function(){p(this,"bdbridge-bridgehead-hover")};z.onclick=function(){k._bridgeClick()}}}},__renderIcon:function(){var v=h.group,u=l("BDBridgeIconIframe"),t;c=l("IconContainer");iconContainer=l(r.containerId);k.__encodeGroupName();if(b.flow==2&&typeof b.special!="object"){}iconContainer.style.display="block";f=false;k.createGroup();k.setSkin();k.setSize();k.setHeadBg();k.setBtnskin();k.ajustbackground();k.ajustSize();if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6&&u){u.style.display="block"}k.getPosition()},_bridgeClick:function(){var x=h.group,w,t=x.length,y={},z=false;for(w=0;w<t;w++){if(x[w].online){z=true;break}}var v=BDBridge.Icon.__getHandleList();if(v&&v.length>0&&!z){for(var u in v){v[u]()}return}if(z){BDBridge.Lib.webim.accept({chattype:r.chatType.bySelf},BDBridge.Icon.__handleStopMouseup);return}},_bridgeIconClick:function(w,A){var u=h.group,y,z=u.length,x={},t=false;for(y=0;y<z;y++){if(w==u[y].groupid){t=u[y].online;break}}var B=BDBridge.Icon.__getHandleList();if(B&&B.length>0&&!t){for(var v in B){B[v]()}return}if(t){x.groupid=w;x.groupname=A;x.chattype=r.chatType.bySelf;BDBridge.Lib.webim.accept(x,BDBridge.Icon.__handleStopMouseup);return}},_bridgeSubClick:function(x,D,H,I){var u=h.group,C=u.length,F,v,E,A,z,B,t=false,y={};for(A=0;A<C;A++){F=u[A];if(x==F.groupid){t=F.online;if(!t){break}else{v=F.user;B=v.length;for(z=0;z<B;z++){E=v[z];if(H==E.subid){t=E.islogin;break}}}}}var G=BDBridge.Icon.__getHandleList();if(G&&G.length>0&&!t){for(var w in G){G[w]()}return}y.groupid=x;y.groupname=D;y.subid=H;y.subname=I;y.chattype=r.chatType.bySelf;BDBridge.Lib.webim.accept(y,BDBridge.Icon.__handleStopMouseup)},__encodeGroupName:function(){var u=h.group;if(!u){return}for(var t=0,v=u.length;t<v;t++){h.group[t].name=h.group[t].groupname.replace(/\\/g,"\\\\")}},__setPosition:function(){var v=l("BDBridgeIconWrap");var t=l("BDBridgeInviteWrap");var u=v.clientHeight;u=v.clientHeight;switch(b.position){case 0:v.style.top="0";v.style.left="auto";v.style.right="0";v.style.margin="8px 8px 0 0";break;case 1:v.style.top="0";v.style.left="0";v.style.margin="8px 0 0 8px";break;case 2:v.style.top="50%";v.style.left="auto";v.style.right="0";v.style.marginRight="8px";v.style.marginTop=-parseInt(u/2,10)+"px";break;case 3:v.style.top="50%";v.style.left="0";v.style.marginLeft="8px";v.style.marginTop=-parseInt(u/2,10)+"px";break;case 4:v.style.top="auto";v.style.left="auto";v.style.bottom="0";v.style.right="0";v.style.margin="0 8px 8px 0";break;case 5:v.style.top="auto";v.style.bottom="0";v.style.left="0";v.style.margin="0 0 8px 8px"}if(!BDBridge.Lib.ie||(BDBridge.Lib.ie6plus&&!BDBridge.Lib.onQuirkMode)){v.style.position="fixed";t.style.position="fixed"}else{v.style.position="absolute";t.style.position="absolute";_scroll();window.attachEvent("onscroll",_scroll);window.attachEvent("onresize",_scroll)}},_scroll:function(){var u=!BDBridge.Lib.onQuirkMode?document.documentElement:document.body;var t=l("BDBridgeIconWrap");if(b.position==0||b.position==1){t.style.top=u.scrollTop+"px"}else{if(b.position==2||b.position==3){t.style.top=parseInt(u.clientHeight/2,10)+u.scrollTop+"px"}else{t.style.bottom="auto";t.style.top=u.clientHeight+u.scrollTop-t.clientHeight-10+"px"}}},handleGroup:function(t){h.group=k._convertGroup(BDBridge.BD_BRIDGE_DATA.group);if(!h.group||h.group.length==0){b.iconlvtype=0}k.__renderIcon()},__handleStopMouseup:function(){if(document.getElementById(r.containerId)){document.getElementById(r.containerId).onmouseup=null}}};return s={__getHandleList:function(){return e.handleMessList},__setHandleList:function(t){e.handleMessList.push(t)},init:function(){l=BDBridge.Lib.G;m=BDBridge.Lib.addClass;p=BDBridge.Lib.removeClass;o=BDBridge.Lib.string.format;d=BDBridge.Lib.Q;each=BDBridge.Lib.each;n=BDBridge.BD_BRIDGE_ROOT;b=BDBridge.BD_BRIDGE_ICON_CONFIG;h=BDBridge.BD_BRIDGE_DATA;BDBridge.Lib.loadCss(n+"asset/css/m-front-icon.css?v=20130816");k._createIcon();if(b.background.url!=""){b.background.url+="?_t="+(new Date()).getTime().toString()}if(window.opera){window.scroll(0,0)}l("bdbridge-left-close").onclick=k._expanIcon;BDBridge.group.getGroupData(k.handleGroup)}}})();var BDBridge=window.BDBridge||{};BDBridge.pigeon=BDBridge.pigeon||(function(){var self,ie=/msie (\d+)/.exec(navigator.userAgent.toLowerCase()),ie6plus=ie&&(parseInt(ie[1],10)>6),g,onQuirkMode=document.compatMode=="CSS1Compat"?false:true;var BD_BRIDGE_ROOT=BDBridge.BD_BRIDGE_ROOT,BD_BRIDGE_DATA=BDBridge.BD_BRIDGE_DATA,BD_BRIDGE_PIGEON_SOUL=BDBridge.BD_BRIDGE_PIGEON_SOUL;var CONFIG={INIT_HEAD_SHORT:31,INIT_HEAD_LONG:60,INIT_HEAD_FUCK:76,INPUT_WIDTH_FLOAT:200,INPUT_WIDTH_SPECIAL:220,INPUT_WIDTH_TIP:6,INPUT_WIDTH_GROUP:238,BODY_HEIGHT_FLOAT:242,BODY_HEIGHT_GROUP:244,OUTLINE_WIDTH_FLOAT:256,OUTLINE_WIDTH_GROUP:348,OUTLINE_HEIGHT_FLOAT:304,OUTLINE_HEIGHT_GROUP:324,COLOR_BLACK:"rgb(0,0,0)",COLOR_DARK:"rgb(102,102,102)",COLOR_GRAY:"rgb(153,153,153)",COLOR_LIGHT:"rgb(204,204,204)",SUBMIT_ACTION:"?module=default&controller=index&action=doMess",CHINESE:{TITLE:"欢迎给我们留言",TEXT:"留言内容",SEND:"发送",RIGHT_TIP:"百度提供技术支持",NAME:"姓名",PHONE:"电话%bd_bp_sp%请输入您的电话号码",ADDRESS:"地址",EMAIL:"邮箱%bd_bp_sp%请输入合法邮箱名",SELECT:"请选择",TIP_DEFAULT:"最多100个字符",TIP_MESS:"请在此输入留言内容，我们会尽快与您联系。",ERR_NOT_NULL:"不能为空",ERR_NOT_SELECTED:"未选择有效的值",ERR_TEXT_TOO_LONG:"不能超过500个字符",ERR_ITEM_TOO_LONG:"不能超过100个字符",ERR_TITLE:"对不起，您提交的留言存在以下错误：",ERR_NUMBER_ONLY:"应当全部由数字组成",ERR_EMAIL_STYLE:"不是标准邮箱格式",ERR_TEL_STYLE:"不是标准手机号码格式"},ENGLISH:{TITLE:"Send message to us",TEXT:"Contents",SEND:"Send",RIGHT_TIP:"Powered by Baidu",NAME:"Name",PHONE:"Tel%bd_bp_sp%Leave us your telephone number",ADDRESS:"Address",EMAIL:"Email%bd_bp_sp%Leave us your email",SELECT:"Please Select ",TIP_DEFAULT:"Less than 100 chars",TIP_MESS:"Leave us your message，we will contact you as soon as possible！",ERR_NOT_NULL:" is necessary",ERR_NOT_SELECTED:" is not correctly selected",ERR_TEXT_TOO_LONG:" should be less than 500 chars",ERR_ITEM_TOO_LONG:" should be less than 100 chars",ERR_TITLE:"Sorry, some errors exist in your submition:",ERR_NUMBER_ONLY:" should be numbers",ERR_EMAIL_STYLE:" is illegal",ERR_TEL_STYLE:"is illegal"},ID:{PIGEON:"BaiduBridgePigeon",CLOSE_BTN:"BdBPClose",SEND_BTN:"BdBPSend",EXTRAL_ITEMS:"BdBPExtral",TITLE_TEXT:"BdBPTitleText",TITLE:"BdBPTitle",NECESSARY:"BdBPAlert_",ITEM_WRAP:"BdBPItem_",ITEM_BORDER:"BdBPDiv_",ITEM_T_HEAD:"BdBPSpan_",ITEM_INPUT:"BdBPInput_",FORM:"BdBPForm0",IFRAME:"BdBPIframe",PIGEON_FOOT:"BdBPFoot",PIGEON_BODY:"BdBPBody",CR_TEXT:"BdBPCrText",CR_ICON:"BdBPCrIcon",ONE_PX:"BdBPOnePx",TWO_PX:"BdBPTwoPx",COPY_RIGHT:"BdBPCopyRight",CRI_RED:"BdBPCrIconRed",CRI_BLUE:"BdBPCrIconBlue",TICK:"BdBPTick"},CLASS:{BORDER:"bd_bp_border",BACKGROUND:"bd_bp_bg"},KEY_TO_SAVE:["bd_bp_messText","bd_bp_messName","bd_bp_messPhone","bd_bp_messAddress","bd_bp_messEmail"],EXTRAL_KEY:"bd_bp_extral_",TEXT:null,SYS_MESS_BG:[{filename:"01.png",description:"主题1",width:287,height:386,hdheight:56,closeh:9,closer:12,left:17,foldw:196,foldh:56},{filename:"02.png",description:"主题2",width:287,height:386,hdheight:56,closeh:9,closer:12,left:17,foldw:196,foldh:56},{filename:"03.png",description:"主题3",width:287,height:386,hdheight:61,closeh:13,closer:13,left:19,foldw:141,foldh:53},{filename:"04.png",description:"主题4",width:287,height:386,hdheight:61,closeh:13,closer:13,left:19,foldw:141,foldh:53},{filename:"05.png",description:"主题5",width:315,height:420,hdheight:90,closeh:44,closer:20,left:41,foldw:141,foldh:53},{filename:"06.png",description:"主题6",width:315,height:420,hdheight:90,closeh:44,closer:20,left:41,foldw:141,foldh:53},{filename:"07.png",description:"主题7",width:315,height:420,hdheight:90,closeh:44,closer:20,left:41,foldw:141,foldh:53},{filename:"08.png",description:"主题8",width:315,height:420,hdheight:90,closeh:44,closer:20,left:41,foldw:141,foldh:53},{filename:"09.png",description:"主题9",width:315,height:420,hdheight:90,closeh:44,closer:20,left:41,foldw:141,foldh:53}]};var buf={messSpecialType:0,tmpParent:null,tmpNode:null,tmpColorList:{},itemCounter:0,tmpTips:{},scrolled:0,defaultICounter:0,sendTimer:false,onlineGroup:null};var controller={_trim:function(str){var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");return str.replace(trimer,"")},_stopDefault:function(e){var e=e||window.event;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},_loadCss:function(url){var css=document.createElement("link");css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",url);document.getElementsByTagName("head")[0].appendChild(css)},_hexToRgb:function(hex_string,default_){if(default_==undefined){default_=null}if(hex_string.substr(0,1)=="#"){hex_string=hex_string.substr(1)}var r;var g;var b;if(hex_string.length==3){r=hex_string.substr(0,1);r+=r;g=hex_string.substr(1,1);g+=g;b=hex_string.substr(2,1);b+=b}else{if(hex_string.length==6){r=hex_string.substr(0,2);g=hex_string.substr(2,2);b=hex_string.substr(4,2)}else{return default_}}r=parseInt(r,16);g=parseInt(g,16);b=parseInt(b,16);if(isNaN(r)||isNaN(g)||isNaN(b)){return default_}else{return{r:r/255,g:g/255,b:b/255}}},_rgbToHex:function(r,g,b,includeHash){r=Math.round(r*255);g=Math.round(g*255);b=Math.round(b*255);if(includeHash==undefined){includeHash=true}r=r.toString(16);if(r.length==1){r="0"+r}g=g.toString(16);if(g.length==1){g="0"+g}b=b.toString(16);if(b.length==1){b="0"+b}return((includeHash?"#":"")+r+g+b).toUpperCase()},_hslToRgb:function(hue,saturation,lum){var red,green,blue;if(lum==0){red=0;green=0;blue=0}else{var i=Math.floor(hue*6);var f=(hue*6)-i;var p=lum*(1-saturation);var q=lum*(1-(saturation*f));var t=lum*(1-(saturation*(1-f)));switch(i){case 1:red=q;green=lum;blue=p;break;case 2:red=p;green=lum;blue=t;break;case 3:red=p;green=q;blue=lum;break;case 4:red=t;green=p;blue=lum;break;case 5:red=lum;green=p;blue=q;break;case 6:case 0:red=lum;green=t;blue=p;break}}return{r:red,g:green,b:blue}},_rgbToHsl:function(red,green,blue){var max=Math.max(Math.max(red,green),blue);var min=Math.min(Math.min(red,green),blue);var hue;var saturation;var lum=max;if(min==max){hue=0;saturation=0}else{var delta=(max-min);saturation=delta/max;if(red==max){hue=(green-blue)/delta}else{if(green==max){hue=2+((blue-red)/delta)}else{hue=4+((red-green)/delta)}}hue/=6;if(hue<0){hue+=1}if(hue>1){hue-=1}}return{h:hue,s:saturation,l:lum}},getHeadColor:function(color){var rgb=(buf.tmpColorList[color]&&buf.tmpColorList[color].rgb)?buf.tmpColorList[color].rgb:(buf.tmpColorList[color]={},buf.tmpColorList[color].rgb=controller._hexToRgb(color));var hsl=(buf.tmpColorList[color]&&buf.tmpColorList[color].hsl)?buf.tmpColorList[color].hsl:(buf.tmpColorList[color]={},buf.tmpColorList[color].hsl=controller._rgbToHsl(rgb.r,rgb.g,rgb.b));return(1-hsl.l+hsl.s<0.3)?"#000":"#fff"},getClothColor:function(color){var rgb=(buf.tmpColorList[color]&&buf.tmpColorList[color].rgb)?buf.tmpColorList[color].rgb:(buf.tmpColorList[color]={},buf.tmpColorList[color].rgb=controller._hexToRgb(color));var hsl=(buf.tmpColorList[color]&&buf.tmpColorList[color].hsl)?buf.tmpColorList[color].hsl:(buf.tmpColorList[color]={},buf.tmpColorList[color].hsl=controller._rgbToHsl(rgb.r,rgb.g,rgb.b));rgb=controller._hslToRgb(hsl.h,hsl.s/2,1-(1-hsl.l)/5);return controller._rgbToHex(rgb.r,rgb.g,rgb.b)},getTipColor:function(color){var rgb=(buf.tmpColorList[color]&&buf.tmpColorList[color].rgb)?buf.tmpColorList[color].rgb:(buf.tmpColorList[color]={},buf.tmpColorList[color].rgb=controller._hexToRgb(color));var hsl=(buf.tmpColorList[color]&&buf.tmpColorList[color].hsl)?buf.tmpColorList[color].hsl:(buf.tmpColorList[color]={},buf.tmpColorList[color].hsl=controller._rgbToHsl(rgb.r,rgb.g,rgb.b));rgb=controller._hslToRgb(0,0,((hsl.l<0.15||hsl.l>0.6)?1-hsl.l:hsl.l));return controller._rgbToHex(rgb.r,rgb.g,rgb.b)},_getTextWidth:function(text,fontFamily){if(!buf.tmpParent){buf.tmpParent=document.createElement("div");buf.tmpParent.style.overflow="hidden";buf.tmpParent.style.width="0px";buf.tmpParent.style.position="relative";buf.tmpNode=document.createElement("div");buf.tmpNode.style.position="absolute";buf.tmpNode.style.whiteSpace="nowrap";buf.tmpNode.style.fontSize="12px";buf.tmpNode.style.padding="0";buf.tmpNode.style.margin="0";buf.tmpNode.style.width="auto";buf.tmpNode.style.fontWeight="normal";if(fontFamily){buf.tmpNode.style.fontFamily=fontFamily}}document.body.appendChild(buf.tmpParent);buf.tmpParent.appendChild(buf.tmpNode);buf.tmpNode.innerHTML=controller._encodeHTML(text);var result=buf.tmpParent.scrollWidth;result=buf.tmpParent.scrollWidth;document.body.removeChild(buf.tmpParent);return result},focusHandler:function(tar){var id=tar.id.match(/\d+/),tagName=tar.tagName.toLowerCase(),GRAY=CONFIG.COLOR_GRAY,elem;if(elem=document.getElementById(CONFIG.ID.ITEM_BORDER+id)){elem.style.borderColor=GRAY}if(elem=document.getElementById(CONFIG.ID.ITEM_T_HEAD+id)){elem.style.borderColor=GRAY;elem.style.color=CONFIG.COLOR_BLACK}tar.style.borderColor=GRAY;if((tagName=="input"||tagName=="textarea")&&!tar.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)){tar.value=""}tar.style.color=CONFIG.COLOR_BLACK},blurHandler:function(tar){var id=tar.id.match(/\d+/),tagName=tar.tagName.toLowerCase(),color_light=CONFIG.COLOR_LIGHT,elem;if(elem=document.getElementById(CONFIG.ID.ITEM_BORDER+id)){elem.style.borderColor=color_light}if(elem=document.getElementById(CONFIG.ID.ITEM_T_HEAD+id)){elem.style.borderColor=color_light;elem.style.color=CONFIG.COLOR_DARK}tar.style.borderColor=color_light;if((tagName=="input"||tagName=="textarea")&&(tar.value=="")){tar.style.color=color_light;tar.value=buf.tmpTips[id]}else{if(tagName=="select"&&tar.selectedIndex==0){tar.style.color=color_light}}},_validateEmail:function(data){return(data.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))},_validateTel:function(data){return(data.match(/^[\d\*\+\-\#]{1,}$/))},_encodeHTML:function(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},_decodeHTML:function(s){return s.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},_decodeData:function(items){items=eval(items);for(var i=0,len=items.length;i<len;++i){items[i].key=controller._decodeHTML(items[i].key);if(items[i].subItems){for(var j=0,_len=items[i].subItems.length;j<_len;++j){items[i].subItems[j]=controller._decodeHTML(items[i].subItems[j])}}}return items},_buildMess:function(colortype,messType,type){var result=[],TEXT=CONFIG.TEXT,iCounter=buf.itemCounter,config=CONFIG;result[result.length]="<div>";result[result.length]=messType?'<span id="%Bd_BP_Span_%'+(iCounter)+'" style="display:none;">'+TEXT.TEXT+'</span>\n                    <textarea name="'+config.KEY_TO_SAVE[iCounter]+'" id="%Bd_BP_Input_%'+(iCounter)+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_mess" style="width:'+(colortype?config.INPUT_WIDTH_FLOAT:config.INPUT_WIDTH_SPECIAL)+'px;">'+TEXT.TIP_MESS+"</textarea>":'<div class="bd_bp_0_head" id="%Bd_BP_Span_%'+(iCounter)+'">'+TEXT.TEXT+'</div>\n                    <textarea name="'+config.KEY_TO_SAVE[iCounter]+'" id="%Bd_BP_Input_%'+(iCounter)+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_mess" style="width:'+config.INPUT_WIDTH_GROUP+'px;">'+TEXT.TIP_MESS+"</textarea>";result[result.length]='<span class="bd_bp_alert" id="%Bd_BP_Alert_%'+iCounter+'" style="display:'+(type?"":"none")+'">*</span><div class="bd_bp_clear_all"></div>';result[result.length]="</div>";buf.tmpTips[iCounter++]=TEXT.TIP_MESS;buf.itemCounter=iCounter;return result.join("")},_buildOrgans:function(json){var html=[],text=CONFIG.TEXT,type=json.backgroundColor?1:0;html[html.length]=controller._buildMess(type,json.messType,1);html[html.length]=controller._buildItem(type,json.messType,json.messItemName,text.NAME);html[html.length]=controller._buildItem(type,json.messType,json.messItemPhone,text.PHONE);html[html.length]=controller._buildItem(type,json.messType,json.messItemAddress,text.ADDRESS);html[html.length]=controller._buildItem(type,json.messType,json.messItemEmail,text.EMAIL);buf.defaultICounter=buf.itemCounter;html[html.length]='<div id="%Bd_BP_Extral%">';html[html.length]=controller.buildExtralItems(type,json.messType,eval(json.extraMessItems));html[html.length]="</div>";return html.join("")},buildExtralItems:function(colortype,messType,items,needDecode){buf.itemCounter=buf.defaultICounter;if(!(items instanceof Array||(typeof items).toLowerCase=="array")){return}if(needDecode){controller._decodeData(items)}var result=[];for(var i=0,len=items.length;i<len;++i){result[result.length]=controller._buildItem(colortype,messType,((items[i].necessity-0)?1:0),items[i].key,items[i].subItems)}return controller._doReplace(result.join(""))},_buildItem:function(colortype,messType,type,key,subItems){if(!key||key==""){return}var result=[],iCounter=buf.itemCounter,IS_IE=ie,QUIRKS=onQuirkMode,config=CONFIG,KEY_TO_SAVE=CONFIG.KEY_TO_SAVE,isSelect=subItems&&((subItems instanceof Array)||((typeof subItems).toLowerCase=="array")),tip=isSelect?("-"+config.TEXT.SELECT+controller._encodeHTML(key)+"-"):(key.split(/%bd_bp_sp%/)[1]||config.TEXT.TIP_DEFAULT);key=key.split(/%bd_bp_sp%/)[0];result[result.length]='<div id="%Bd_BP_Item_%'+iCounter+'" style="margin:8px 0 0 0;'+((type==2)?"display:none":"")+'">';var width=controller._getTextWidth(key,"Arial"),isTextArea=false;if(iCounter>=KEY_TO_SAVE.length){if(!isSelect&&width>60){isTextArea=true;var tmpWidth=controller._getTextWidth(key.slice(5),"Arial");key=controller._trim(key.slice(0,5).concat(" ").concat(key.slice(5)));width=controller._getTextWidth(key.slice(0,5),"Arial");width=(tmpWidth>width)?tmpWidth:width}}if(messType){if(isSelect){result[result.length]='<div id="%Bd_BP_Div_%'+(iCounter)+'" class="bd_bp_item" style="border-right:0;"><span id="%Bd_BP_Span_%'+(iCounter)+'" class="bd_bp_1_head" style="border-right:0;">'+controller._encodeHTML(key)+'<span id="%Bd_BP_Alert_%'+iCounter+'" class="bd_bp_alert"'+((type==1)?"":'style="display:none')+'">*</span></span></div>';result[result.length]='<select name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" id="%Bd_BP_Input_%'+(iCounter)+'" '+(IS_IE?"onfocusin":"onfocus")+'="BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_select" style="width:'+((colortype?config.INPUT_WIDTH_FLOAT:config.INPUT_WIDTH_SPECIAL)-width-7-((type==1)?config.INPUT_WIDTH_TIP:0))+'px;">';result[result.length]='<option selected="true" value='+tip+">"+tip+"</option>";for(var i=0,len=subItems.length;i<len;++i){result[result.length]='<option value="'+controller._encodeHTML(subItems[i])+'">'+controller._encodeHTML(subItems[i])+"</option>"}result[result.length]="</select>"}else{result[result.length]='<div id="%Bd_BP_Div_%'+(iCounter)+'" class="bd_bp_item" '+((isTextArea)?('style="height:40px;"'):"")+'><span id="%Bd_BP_Span_%'+(iCounter)+'" class="bd_bp_1_head" style='+((isTextArea)?('"width:'+((width-0)+((IS_IE&&QUIRKS)?9:0))+"px;"):'"')+'height:40px;">'+controller._encodeHTML(key)+'<span id="%Bd_BP_Alert_%'+iCounter+'" class="bd_bp_alert"'+((type==1)?"":'style="display:none')+'">*</span></span>';if(isTextArea){result[result.length]='<textarea name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" id="%Bd_BP_Input_%'+(iCounter)+'" class="bd_bp_0_input" style="height:36px;width:'+((colortype?config.INPUT_WIDTH_FLOAT:config.INPUT_WIDTH_SPECIAL)-width-9-((type==1)?config.INPUT_WIDTH_TIP:0))+"px;"+((iCounter==2||iCounter==4)?"ime-mode:disabled;":"")+'">'+tip+"</textarea></div>"}else{result[result.length]='<input name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" value="'+tip+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" id="%Bd_BP_Input_%'+(iCounter)+'" class="bd_bp_0_input" maxlength="100" type="text" style="width:'+((colortype?config.INPUT_WIDTH_FLOAT:config.INPUT_WIDTH_SPECIAL)-width-9-((type==1)?config.INPUT_WIDTH_TIP:0))+"px;"+((iCounter==2||iCounter==4)?"ime-mode:disabled;":"")+'"/></div>'}}}else{if(subItems&&((subItems instanceof Array)||((typeof subItems).toLowerCase=="array"))){result[result.length]='<span id="%Bd_BP_Span_%'+(iCounter)+'" class="bd_bp_0_head">'+controller._encodeHTML(key)+"</span>";result[result.length]='<select name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" id="%Bd_BP_Input_%'+(iCounter)+'" '+(IS_IE?"onfocusin":"onfocus")+'="BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_select" style="width:'+(config.INPUT_WIDTH_GROUP+((QUIRKS)?0:2))+'px;">';result[result.length]='<option selected="true" value="-'+config.TEXT.SELECT+controller._encodeHTML(key)+'-">-'+config.TEXT.SELECT+controller._encodeHTML(key)+"-</option>";for(var i=0,len=subItems.length;i<len;++i){result[result.length]='<option value="'+controller._encodeHTML(subItems[i])+'">'+controller._encodeHTML(subItems[i])+"</option>"}result[result.length]="</select>"}else{result[result.length]='<span id="%Bd_BP_Span_%'+(iCounter)+'" class="bd_bp_0_head">'+controller._encodeHTML(key)+"</span>";if(isTextArea){result[result.length]='<textArea name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" id="%Bd_BP_Input_%'+(iCounter)+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_1_input" style="height:40px;width:'+config.INPUT_WIDTH_GROUP+"px;"+((iCounter==2||iCounter==4)?"ime-mode:disabled;":"")+'">'+tip+"</textArea>"}else{result[result.length]='<input name="'+(KEY_TO_SAVE[iCounter]||config.EXTRAL_KEY+(iCounter-buf.defaultICounter))+'" value="'+tip+'" id="%Bd_BP_Input_%'+(iCounter)+'" onFocus="javascript:BDBridge.pigeon.focusHandler(this);" onBlur="javascript:BDBridge.pigeon.blurHandler(this);" class="bd_bp_1_input" maxlength="100" type="text" style="width:'+config.INPUT_WIDTH_GROUP+"px;"+((iCounter==2||iCounter==4)?"ime-mode:disabled;":"")+'"/>'}}}result[result.length]='<div class="bd_bp_clear_all"></div></div>';buf.tmpTips[iCounter++]=tip;buf.itemCounter=iCounter;return result.join("")},_doReplace:function(s){var p_id=CONFIG.ID;return s.replace(/%Bd_BP_Close%/g,p_id.CLOSE_BTN).replace(/%Baidu_Bridge_Pigeon%/g,p_id.PIGEON).replace(/%Bd_BP_Send%/g,p_id.SEND_BTN).replace(/%Bd_BP_Extral%/g,p_id.EXTRAL_ITEMS).replace(/%Bd_BP_Title%/g,p_id.TITLE).replace(/%Bd_BP_TitleText%/g,p_id.TITLE_TEXT).replace(/%Bd_BP_Alert_%/g,p_id.NECESSARY).replace(/%Bd_BP_Item_%/g,p_id.ITEM_WRAP).replace(/%Bd_BP_Div_%/g,p_id.ITEM_BORDER).replace(/%Bd_BP_Span_%/g,p_id.ITEM_T_HEAD).replace(/%Bd_BP_Input_%/g,p_id.ITEM_INPUT).replace(/%Bd_BP_Form_0%/g,p_id.FORM).replace(/%Bd_BP_Body%/g,p_id.PIGEON_BODY).replace(/%Bd_BP_Foot%/g,p_id.PIGEON_FOOT).replace(/%Bd_BP_Iframe%/g,p_id.IFRAME).replace(/%Bd_BP_Cr_Icon%/g,p_id.CR_ICON).replace(/%Bd_BP_Cr_Text%/g,p_id.CR_TEXT).replace(/%Bd_BP_1Px%/g,p_id.ONE_PX).replace(/%Bd_BP_2Px%/g,p_id.TWO_PX).replace(/%Bd_BP_CopyRight%/g,p_id.COPY_RIGHT).replace(/%Bd_BP_CRIRed%/g,p_id.CRI_RED).replace(/%Bd_BP_CRIBlue%/g,p_id.CRI_BLUE).replace(/%Bd_BP_Tick%/g,p_id.TICK).replace(/%bd_bp_border%/g,CONFIG.CLASS.BORDER).replace(/%bd_bp_bg%/g,CONFIG.CLASS.BACKGROUND).replace(/%bd_bp_cloth%/g,CONFIG.CLASS.CLOTH)},lockPosition:function(type){var mess=document.getElementById(CONFIG.ID.PIGEON),closePic=document.getElementById("closepic"),IS_IE=ie,IE6_PLUS=ie6plus,QUIRKS=onQuirkMode;controller.lockPosition._scroll=function(){if(!IS_IE||(IE6_PLUS&&!QUIRKS)){return}var page=!QUIRKS?document.documentElement:document.body;if(type){mess.style.top=page.clientHeight-mess.clientHeight+page.scrollTop-5+"px";closePic&&(closePic.style.top=page.clientHeight-closePic.clientHeight+page.scrollTop+"px")}else{mess.style.top=parseInt(page.clientHeight/2,10)+page.scrollTop-5+"px";closePic&&(closePic.style.top=parseInt(page.clientHeight/2)+page.scrollTop+"px")}};if(!IS_IE||(IE6_PLUS&&!QUIRKS)){mess.style.position="fixed";closePic&&(closePic.style.position="fixed")}else{mess.style.position="absolute";closePic&&(closePic.style.position="absolute");window.attachEvent("onscroll",controller.lockPosition._scroll);window.attachEvent("onresize",controller.lockPosition._scroll)}},_clearTips:function(force){var IS_IE=ie,IE6_PLUS=ie6plus,input;for(var i=0;i<buf.itemCounter;++i){input=document.getElementById(CONFIG.ID.ITEM_INPUT+i);if(BDBridge.Lib.mobile){if(input.tagName.toLowerCase()=="select"){input.options[0].value=buf.tmpTips[i];input.options[0].innerHTML=buf.tmpTips[i];input.selectedIndex=0}else{input.value=""}continue}if(!input.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)||force){if(input.tagName.toLowerCase()=="select"){if(input.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)&&IS_IE&&!IE6_PLUS){continue}input.options[0].value=buf.tmpTips[i];input.options[0].innerHTML=buf.tmpTips[i];input.selectedIndex=0;input.style.color=CONFIG.COLOR_LIGHT}else{input.value=buf.tmpTips[i];input.style.color=CONFIG.COLOR_LIGHT}}}},scroll:function(e){var e=e||window.event,ID=CONFIG.ID,mess=document.getElementById(ID.PIGEON),clostBtn=document.getElementById(ID.CLOSE_BTN),pos=BD_BRIDGE_PIGEON_SOUL.position,iframe=document.getElementById("Baidu_Bridge_Pigeon_Iframe");controller.setPosition(pos);if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}if(!buf.scrolled){buf.scrolled=1;CONFIG.OUTLINE_HEIGHT_FLOAT=document.getElementById(ID.PIGEON).clientHeight;mess.style.height="26px";mess.style.cursor="pointer";iframe&&(iframe.style.height="26px");document.getElementById(ID.PIGEON_FOOT).style.display="none";document.getElementById(ID.PIGEON_BODY).style.display="none";mess.onclick=BDBridge.pigeon.scroll}else{buf.scrolled=0;var dis=document.getElementById(ID.PIGEON_BODY).style.display;if(dis=="block"||dis==""){CONFIG.OUTLINE_HEIGHT_FLOAT=document.getElementById(ID.PIGEON).clientHeight}document.getElementById(ID.PIGEON_FOOT).style.display="block";document.getElementById(ID.PIGEON_BODY).style.display="block";mess.style.height=CONFIG.OUTLINE_HEIGHT_FLOAT+"px";mess.style.cursor="default";iframe&&(iframe.style.height=CONFIG.OUTLINE_HEIGHT_FLOAT+"px");mess.onclick=""}controller.lockPosition._scroll&&controller.lockPosition._scroll()},setPosition:function(pos){var container=g("BaiduBridgePigeon");var winWidth=document.documentElement.clientWidth||document.body.clientWidth;var winHeight=document.documentElement.clientHeight||document.body.clientHeight;var cWidth=container.clientWidth;var cHeight=container.clientHeight;pos=parseInt(pos,10);switch(pos){case 0:container.style.bottom=0;container.style.left=0;container.style.right="";break;case 1:container.style.bottom=0;container.style.left="";container.style.right=0;break;case 2:container.style.bottom=(winHeight-cHeight)/2+"px";container.style.left=(winWidth-cWidth)/2+"px";container.style.right="";break;default:}},show:function(){document.getElementById(CONFIG.ID.PIGEON).style.display="block"},showBigSpecial:function(){document.getElementById(CONFIG.ID.PIGEON).style.display="block";document.getElementById("closepic").style.display="none"},showSmallSpecial:function(){document.getElementById(CONFIG.ID.PIGEON).style.display="none";document.getElementById("closepic").style.display="block"},hide:function(){document.getElementById(CONFIG.ID.PIGEON).style.display="none"},_succeed:function(){document.getElementById(CONFIG.ID.SEND_BTN).onclick=controller._checkSend;controller._clearTips(1)},_fail:function(){document.getElementById(CONFIG.ID.SEND_BTN).onclick=controller._checkSend;controller._clearTips()},_checkSend:function(e){controller._stopDefault(e);if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}var TEXT=CONFIG.TEXT,IS_IE=ie,errors=[TEXT.ERR_TITLE],ID=CONFIG.ID,i,tmpNode,tmpTitle,tmpTagName,tmpValue;for(i=0;i<buf.itemCounter;++i){tmpNode=document.getElementById(ID.ITEM_INPUT+i);if(typeof tmpNode.textContent=="string"){tmpTitle=document.getElementById(ID.ITEM_T_HEAD+i).textContent}else{tmpTitle=document.getElementById(ID.ITEM_T_HEAD+i).innerText}tmpValue=controller._trim(tmpNode.value);tmpTagName=tmpNode.tagName.toLowerCase();if(BDBridge.Lib.mobile){if(tmpValue==""&&document.getElementById(ID.NECESSARY+i).style.display!="none"){errors.push("\t"+controller._decodeHTML(tmpTitle)+(tmpTagName=="select"?TEXT.ERR_NOT_SELECTED:TEXT.ERR_NOT_NULL))}else{if(tmpTagName=="textarea"&&tmpNode.value.length>(i==0?500:100)){errors.push("\t"+tmpTitle+(i==0?TEXT.ERR_TEXT_TOO_LONG:TEXT.ERR_ITEM_TOO_LONG))}else{if(i==4&&tmpValue!=""&&!controller._validateEmail(tmpValue)){errors.push("\t"+tmpTitle+TEXT.ERR_EMAIL_STYLE)}}}if(i==2&&tmpValue!=""&&!controller._validateTel(tmpValue)){errors.push("\t"+tmpTitle+TEXT.ERR_TEL_STYLE)}if(tmpValue==""){if(tmpNode.tagName.toLowerCase()=="select"){tmpNode.options[0].value="";tmpNode.options[0].innerHTML=""}else{tmpNode.value=""}}}else{if(!tmpNode.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)&&document.getElementById(ID.NECESSARY+i).style.display!="none"){errors.push("\t"+controller._decodeHTML(tmpTitle)+(tmpTagName=="select"?TEXT.ERR_NOT_SELECTED:TEXT.ERR_NOT_NULL))}else{if(tmpTagName=="textarea"&&tmpNode.value.length>(i==0?500:100)){errors.push("\t"+tmpTitle+(i==0?TEXT.ERR_TEXT_TOO_LONG:TEXT.ERR_ITEM_TOO_LONG))}else{if(i==4&&tmpNode.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)&&!controller._validateEmail(tmpValue)){errors.push("\t"+tmpTitle+TEXT.ERR_EMAIL_STYLE)}}}if(i==2&&tmpNode.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)&&!controller._validateTel(tmpValue)){errors.push("\t"+tmpTitle+TEXT.ERR_TEL_STYLE)}if(!tmpNode.style.color.match(/(rgb\(0.*\))|(\s*#0+)/)){if(tmpNode.tagName.toLowerCase()=="select"){tmpNode.options[0].value="";tmpNode.options[0].innerHTML=""}else{tmpNode.value=""}}}}if(errors.length>1){alert(errors.join("\n"));controller._clearTips();return}else{var json={},keys=CONFIG.KEY_TO_SAVE,i;json.items=[];for(i=0;i<buf.itemCounter;i++){tmpNode=document.getElementById(ID.ITEM_INPUT+i);if(typeof tmpNode.textContent=="string"){tmpTitle=document.getElementById(ID.ITEM_T_HEAD+i).textContent}else{tmpTitle=document.getElementById(ID.ITEM_T_HEAD+i).innerText}tmpValue=controller._trim(tmpNode.value);if(i==0){json.mess=tmpValue}else{json.items.push({title:tmpTitle,value:tmpValue,name:tmpNode.name})}}var tmpCharset=false;if(IS_IE){tmpCharset=document.charset;document.charset="utf-8"}BDBridge.pigeonFuc.getStatus(controller._handleSendStatus);BDBridge.pigeonFuc.send(json);if(IS_IE){document.charset=tmpCharset}document.getElementById(ID.SEND_BTN).onclick="";if(buf.messSpecialType){controller._closeSpecial(e)}else{controller._close(e)}}},_createContainer:function(){var div=document.getElementById("BDBridgeWrap")||document.getElementById("BDBridgeNewWrap");if(!div){div=document.createElement("div");div.id="BDBridgeWrap"}var dMess=document.createElement("div");dMess.id="BDBridgeMess";div.appendChild(dMess)},create:function(json,element,clear,needDecode){if(!(json&&element)){return}if(needDecode){json.extraMessItems=decodeData(json.extraMessItems)}controller._close=function(e){controller._stopDefault(e);if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}if(json.messType){BDBridge.pigeon.scroll(e)}else{controller.hide()}};controller._closeSpecial=function(e){controller._stopDefault(e);var pos=BD_BRIDGE_PIGEON_SOUL.position;controller.setPosition(pos);if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}var url=json.backgroundUrl.toString(),format=BDBridge.Lib.string.format,g=BDBridge.Lib.G,closepicCt=g("closepic"),closeIframe=g("Baidu_Bridge_Pigeon_Close_Iframe"),closepicBg=g("Baidu_Bridge_Pigeon_closepic_bg"),pcindex,spConfig,picwidth,picheight,closepic;pcindex=url.substring(url.lastIndexOf("/")+1,url.lastIndexOf("."));spConfig=CONFIG.SYS_MESS_BG[pcindex-1];url=url.replace(/"/g,"");picwidth=spConfig.foldw;picheight=spConfig.foldh;closepic=url.replace(/\.png$/,"_foldup.png");if(closepicBg){closepicBg.style.background=closepic?format("url(#{0})",closepic):"";if(ie&&!ie6plus){closepicBg.style.background="none";closepicBg.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+closepic+")"}closepicBg.style.width=picwidth+"px";closepicBg.style.height=picheight+"px"}else{closepicCt.style.background=closepic?format("url(#{0})",closepic):""}closepicCt.style.width=picwidth+"px";closepicCt.style.height=picheight+"px";if(closeIframe){closeIframe.style.width=picwidth+"px";closeIframe.style.height=picheight+"px"}g("BaiduBridgePigeon").style.display="none";g("closepic").style.display="block";closepicCt.onclick=function(){g("BaiduBridgePigeon").style.display="block";g("closepic").style.display="none"}};if(json.backgroundColor){buf.messSpecialType=0;controller._born(json,element,clear)}else{buf.messSpecialType=1;controller._bornSpecial(json,element,clear)}(function(){if(!BDBridge.Lib.mobile){return}var pigeon=document.getElementById(CONFIG.ID.PIGEON);var textareas=pigeon.getElementsByTagName("textarea");var inputs=pigeon.getElementsByTagName("input");var i;var len;var tmp;for(i=0,len=textareas.length;i<len;i++){tmp=textareas[i];tmp.onfocus=null;tmp.onblur=null;tmp.setAttribute("placeholder",tmp.value);tmp.value=""}for(i=0,len=inputs.length;i<len;i++){tmp=inputs[i];tmp.onfocus=null;tmp.onblur=null;tmp.setAttribute("placeholder",tmp.value);tmp.value=""}}());document.getElementById(CONFIG.ID.SEND_BTN).onmouseover=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/normal/,"hover");me.style.background=newBg}};document.getElementById(CONFIG.ID.CLOSE_BTN).onmouseover=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/normal/,"hover");me.style.background=newBg}};document.getElementById(CONFIG.ID.SEND_BTN).onmouseout=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/hover/,"normal");me.style.background=newBg}};document.getElementById(CONFIG.ID.CLOSE_BTN).onmouseout=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/hover/,"normal");me.style.background=newBg}};document.getElementById(CONFIG.ID.SEND_BTN).onmousedown=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/hover/,"press");me.style.background=newBg}};document.getElementById(CONFIG.ID.CLOSE_BTN).onmousedown=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/hover/,"press");me.style.background=newBg}};document.getElementById(CONFIG.ID.SEND_BTN).onmouseup=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/press/,"normal");me.style.background=newBg}};document.getElementById(CONFIG.ID.CLOSE_BTN).onmouseup=function(){var me=this,oldBg=me.style.background,newBg;if(!json.backgroundColor){newBg=oldBg.replace(/press/,"normal");me.style.background=newBg}}},_born:function(json,element,type){if(!(json&&element)){return}buf.itemCounter=0;buf.tmpTips={};CONFIG.TEXT=(json.language-0)?CONFIG.ENGLISH:CONFIG.CHINESE;var html=[],config=CONFIG,tmpColor;html[html.length]='<div id="%Baidu_Bridge_Pigeon%" style="'+(type?"":"z-index:2147483647;");html[html.length]=json.messType?("width:"+config.OUTLINE_WIDTH_FLOAT+"px;bottom:"+(type==1?"38px;":"0px;")+(json.position?"right":"left")+(type==1?":17px;":":0px;")):((type?"":"display:none;")+"width:"+config.OUTLINE_WIDTH_GROUP+"px;height:"+config.OUTLINE_HEIGHT_GROUP+"px;top:50%;left:50%;margin-left:-"+(config.OUTLINE_WIDTH_GROUP/2)+"px;margin-top:-"+(config.OUTLINE_HEIGHT_GROUP/2)+"px;");html[html.length]='">';if(ie&&!ie6plus){html[html.length]='<iframe src="about:blank;" frameborder="0" marginheight="0" marginwidth="0" id="Baidu_Bridge_Pigeon_Iframe" style="width:'+config.OUTLINE_WIDTH_FLOAT+"px;height:"+config.OUTLINE_HEIGHT_GROUP+'px;_filter:alpha(opacity=0);position:absolute;top:0;left:0;"></iframe>';html[html.length]='<div style="position:relative; z-index: 10;">'}html[html.length]='<div id="%Bd_BP_2Px%" class="%bd_bp_bg%" style="background-color:'+json.backgroundColor+'">&nbsp;</div>';html[html.length]='<div id="%Bd_BP_1Px%" class="%bd_bp_bg%" style="background-color:'+json.backgroundColor+'">&nbsp;</div>';html[html.length]='<div class="bd_bp_pigeon %bd_bp_bg%" style="border-left:1px solid '+json.backgroundColor+";border-right:1px solid "+json.backgroundColor+";border-bottom: 1px solid "+json.backgroundColor+';">';html[html.length]='	<div id="%Bd_BP_Title%" class="%bd_bp_bg%" style="background-color:'+json.backgroundColor+';">';if(!ie||ie6plus){html[html.length]='<div id="%Bd_BP_TitleText%" class="%bd_bp_bg%" style=" background-position:'+(json.language?"0 0;":"0 0;")+'"></div>'}else{html[html.length]='<div id="%Bd_BP_TitleText%" class="%bd_bp_bg%" style=" background-position:'+(json.language?"0 0;":"0 0;")+" background-image:none; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+BD_BRIDGE_ROOT+'img/matrix/mess-text.png);"></div>'}html[html.length]='<a id="%Bd_BP_Close%" hideFocus="true" href="javascript:;"></a>';html[html.length]='	<div class="bd_bp_clear_all"></div></div>';html[html.length]='	<div id="%Bd_BP_Body%" style="padding-left:10px;max-height:'+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+"px;_height:expression((this.clientHeight>="+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+")?'"+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+"':'auto');zoom:1;\">";html[html.length]='		<form id="%Bd_BP_Form_0%" target="%Bd_BP_Iframe%" accept-charset="utf-8" method="post" '+(type?"":'action="'+BD_BRIDGE_ROOT+config.SUBMIT_ACTION+"&siteid="+BD_BRIDGE_DATA.siteid+'"')+">";html[html.length]=controller._buildOrgans(json);html[html.length]="		</form>";html[html.length]="	</div>";html[html.length]='	<div class="%bd_bp_border%" id="%Bd_BP_Foot%" style="padding:0 '+(json.messType?"8px":"27px 0 8px")+';">';html[html.length]='       <div id="%Bd_BP_Send%">';html[html.length]='        <div class = "opacitymask" style = "background:'+json.backgroundColor+';"></div>';html[html.length]='		  <a hideFocus="true" href="javascript:;" style="line-height:22px;position:relative;font-weight:bold;">'+config.TEXT.SEND+"</a>";html[html.length]="        </div>";html[html.length]='        <div class="BdBridgeLogo"></div>';html[html.length]='		<div class="bd_bp_clear_all"></div>';html[html.length]="	</div>";html[html.length]="</div>";if(ie&&!ie6plus){html[html.length]="</div>"}html[html.length]="</div>";element.innerHTML=controller._doReplace(html.join(""));if(!type){controller.lockPosition(json.messType)}document.getElementById(config.ID.CLOSE_BTN).onclick=controller._close;if(!type){document.getElementById(config.ID.SEND_BTN).onclick=controller._checkSend}},_bornSpecial:function(json,element,type){if(!(json&&element)){return}buf.itemCounter=0;buf.tmpTips={};CONFIG.TEXT=(json.language-0)?CONFIG.ENGLISH:CONFIG.CHINESE;var html=[],config=CONFIG,spConfig,url=json.backgroundUrl.toString(),pcindex,closeHeight,closeRight,sendpic,closepic,left,width,height,tmpColor;pcindex=url.substring(url.lastIndexOf("/")+1,url.lastIndexOf("."));pcindex=parseInt(pcindex,10);spConfig=CONFIG.SYS_MESS_BG[pcindex-1];url=url.replace(/"/g,"");width=spConfig.width;height=spConfig.height;closeHeight=spConfig.closeh;closepic=url.replace(/\.png$/,"_normal.png");closeRight=spConfig.closer;sendpic=json.language?url.replace(/\.png$/,"_send_normal_2.png"):url.replace(/\.png$/,"_send_normal.png");left=spConfig.left;if(!ie||ie6plus){html[html.length]='<div id="%Baidu_Bridge_Pigeon%" style="background:url('+url+");width:"+width+"px;height:"+height+"px;"+(type?"":"z-index:2147483647;");html[html.length]="bottom:"+(type==1?"38px;":"0px;")+(json.position?"right":"left")+(type==1?":17px;":":0px;");html[html.length]='">'}else{html[html.length]='<div id="%Baidu_Bridge_Pigeon%" style="width:'+width+"px;height:"+height+"px;"+(type?"":"z-index:2147483647;");html[html.length]="bottom:"+(type==1?"38px;":"0px;")+(json.position?"right":"left")+(type==1?":17px;":":0px;");html[html.length]='">';html[html.length]='<iframe src="about:blank;" frameborder="0" marginheight="0" marginwidth="0" style="width:'+width+"px;height:"+height+'px;_filter:alpha(opacity=0);position:absolute;top:0;left:0;"></iframe>';html[html.length]='<div style="position:absolute;top:0;left:0;z-index: 5;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+url+");width:"+width+"px;height:"+height+'px;"></div>'}html[html.length]='<div class="bd_bp_pigeon %bd_bp_bg%" style="position:relative; z-index:10;">';html[html.length]='	<div id="%Bd_BP_Title%" class="%bd_bp_bg%" style="height:'+spConfig.hdheight+'px;">';html[html.length]='<a id="%Bd_BP_Close%" style="background:url('+closepic+");margin-Top:"+closeHeight+"px;margin-right:"+closeRight+'px;width:23px;height:23px; hideFocus="true" href="javascript:;"></a>';html[html.length]='	<div class="bd_bp_clear_all"></div></div>';html[html.length]='	<div id="%Bd_BP_Body%" style="background:none;margin-left:'+left+"px; margin-right:12px; max-height:"+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+"px;_height:expression((this.clientHeight>="+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+")?'"+(json.messType?config.BODY_HEIGHT_FLOAT:config.BODY_HEIGHT_GROUP)+"':'auto');zoom:1;\">";html[html.length]='		<form id="%Bd_BP_Form_0%" target="%Bd_BP_Iframe%" accept-charset="utf-8" method="post" '+(type?"":'action="'+BD_BRIDGE_ROOT+config.SUBMIT_ACTION+"&siteid="+BD_BRIDGE_DATA.siteid+'"')+">";html[html.length]=controller._buildOrgans(json);html[html.length]="		</form>";html[html.length]="	</div>";html[html.length]='	<div class="%bd_bp_border%" id="%Bd_BP_Foot%" style="border:none;background:none;padding:0 '+(json.messType?"8px":"27px 0 8px")+';height: 32px;">';html[html.length]='		 <a  id="%Bd_BP_Send%" hideFocus="true" href="javascript:;" style="width:104px;height:28px;left:40px;position:absolute;background:url('+sendpic+');line-height:28px;font-weight:bbold;"></a>';html[html.length]='		<div class="bd_bp_clear_all"></div>';html[html.length]="	</div>";html[html.length]="</div>";html[html.length]="</div>";html[html.length]='<div id="closepic" style="display:none;position:absolute;bottom:0;'+(json.position?"right:0px;":"left:0px;")+'" class="BaiduBridgePigeon-closepic">';if(ie&&!ie6plus){html[html.length]='<iframe src="about:blank;" frameborder="0" marginheight="0" marginwidth="0" id="Baidu_Bridge_Pigeon_Close_Iframe" style="_filter:alpha(opacity=0);position:absolute;top:0;left:0;"></iframe>';html[html.length]='<div id="Baidu_Bridge_Pigeon_closepic_bg" style="position:relative; z-index:10;"></div>'}html[html.length]="</div>";element.innerHTML=controller._doReplace(html.join(""));if(!type){controller.lockPosition(json.messType)}if(type!=1){document.getElementById(config.ID.CLOSE_BTN).onclick=controller._closeSpecial}if(!type){document.getElementById(config.ID.SEND_BTN).onclick=controller._checkSend}},_convertGroup:function(group){var l=group.length;var actual=0;var tempId="";var tempName="";var tempIndex="";buf.onlineGroup=[];for(var a=0;a<l;a++){if(group[a]["user"].length>0){actual++;tempId=group[a]["groupid"];tempName=group[a]["groupname"];tempIndex=a}}if(actual==0){return}if(actual==1){var online=0;var user=group[tempIndex]["user"];for(var i=0,n=user.length;i<n;i++){if((user[i]["islogin"]-0)!=0){online=1;break}}if(online){buf.onlineGroup.push(tempIndex)}}else{for(var i=0;i<l;i++){var user=group[i]["user"];if(user.length!=0){var online=0;for(var j=0,n=user.length;j<n;j++){if((user[j]["islogin"]-0)!=0){online=1;break}}if(online){buf.onlineGroup.push(i)}}}}},handleClickIcon:function(){controller.show();if(buf.messSpecialType==0){buf.scrolled=1;BDBridge.pigeon.scroll()}else{controller.showBigSpecial()}var g=g?g:BDBridge.Lib.G;if(g("closepic")){g("closepic").style.display="none"}controller.setPosition(2)},handleInvite:function(chatname){controller.show();if(chatname){controller._setMess(chatname)}if(buf.messSpecialType==0){if(buf.scrolled==1){BDBridge.pigeon.scroll()}}else{controller.showBigSpecial()}var g=g?g:BDBridge.Lib.G;if(g("closepic")){g("closepic").style.display="none"}controller.setPosition(2)},_handleGroup:function(data){if(!buf.onlineGroup){controller._convertGroup(data)}controller.create(BD_BRIDGE_PIGEON_SOUL,document.getElementById("BDBridgeMess"),0);if(BD_BRIDGE_PIGEON_SOUL.disableMess!=0){controller.hide()}else{if(buf.onlineGroup.length==0){controller.show()}else{controller.hide()}}},_handleSendStatus:function(status){if(status==1){controller._succeed()}else{if(status==0){controller._fail()}}},_setMess:function(mess){document.getElementById(CONFIG.ID.ITEM_INPUT+0).value=mess;document.getElementById(CONFIG.ID.ITEM_INPUT+0).style.color=CONFIG.COLOR_BLACK}};return self={focusHandler:controller.focusHandler,blurHandler:controller.blurHandler,create:controller.create,handleClickIcon:controller.handleClickIcon,handleInvite:controller.handleInvite,scroll:controller.scroll,buildExtralItems:controller.buildExtralItems,getClothColor:controller.getClothColor,getTipColor:controller.getTipColor,getHeadColor:controller.getHeadColor,show:controller.show,hide:controller.hide,getID:function(){return CONFIG.ID},getCLASS:function(){return CONFIG.CLASS},init:function(){var invite=BDBridge.invite;BD_BRIDGE_ROOT=BDBridge.BD_BRIDGE_ROOT;BD_BRIDGE_DATA=BDBridge.BD_BRIDGE_DATA;BD_BRIDGE_PIGEON_SOUL=BDBridge.BD_BRIDGE_PIGEON_SOUL;g=g?g:BDBridge.Lib.G;controller._createContainer();var cssPath=BDBridge.Lib.mobile?"asset/css/m-front-mess-mobile.css?v=20130705":"asset/css/m-front-mess.css?v=20130723";controller._loadCss(BD_BRIDGE_ROOT+cssPath);if(BDBridge.Icon&&BDBridge.Icon.__setHandleList){BDBridge.Icon.__setHandleList(controller.handleClickIcon)}if(invite&&invite.__setHandleList){invite.__setHandleList(controller.handleInvite)}if(BD_BRIDGE_PIGEON_SOUL.messFloatType==0){BDBridge.group.getGroupData(controller._handleGroup)}else{controller.create(BD_BRIDGE_PIGEON_SOUL,document.getElementById("BDBridgeMess"),0);if(BD_BRIDGE_PIGEON_SOUL.disableMess!=0){controller.hide()}}}}})();var BDBridge=window.BDBridge||{};BDBridge.pigeonFuc=BDBridge.pigeonFuc||(function(){var d;var b=BDBridge.BD_BRIDGE_ROOT,h=BDBridge.BD_BRIDGE_DATA;var f=BDBridgeStat;var a={SCHEME:{hiddenform:function(j){c._form_send(j)}},SCHEME_INFO:"hiddenform",SUBMIT_ACTION:"?module=default&controller=index&action=doMess"};var e={status:false,sendTimer:null,callbacklist:[],sCounter:0};var c={_form_send:function(m){var r=b+a.SUBMIT_ACTION+"&siteid="+h.siteid;var o=BDBridge.Lib.G("BdBPIframe")?BDBridge.Lib.G("BdBPIframe"):BDBridge.Lib.createIframe("BdBPIframe","BdBPIframe","display:none");BDBridge.Lib.bind(o,"load",c.succeed);var p=BDBridge.Lib.G("BdBPForm")?BDBridge.Lib.G("BdBPForm"):BDBridge.Lib.createForm("BdBPForm","post",r,"BdBPIframe",false,"utf-8");var l=[];var k,j=m.items.length;l[l.length]='		<input type="hidden" name="bd_bp_title" value="'+h.title+'"/>';l[l.length]='		<input type="hidden" name="bd_bp_referer" value="'+h.referrer+'"/>';l[l.length]='		<input type="hidden" name="bd_bp_tick" id="BdBPTick" value="'+(new Date()).getTime()+'"/>';l[l.length]='<input name="bd_bp_messText" value="'+m.mess+'" id= "BdBPInput_0" />';var n;for(k=0;k<j;k++){n=m.items[k].name?m.items[k].name:"bd_bp_extral_"+k;l[l.length]='<input name="'+n+'" value="'+m.items[k].value+'" id= "BdBPInput'+parseInt(k+1)+'" />'}p.innerHTML=l.join("");p.submit();e.sendTimer=setTimeout(BDBridge.pigeonFuc.__fail,3000)},succeed:function(){if(!e.sendTimer){return}f("SEND_MESS",{siteId:h.SITE_ID,mainId:h.mainid},{open:1});clearTimeout(e.sendTimer);e.sendTimer=null;var j=e.callbacklist.length;while(j--){e.callbacklist[0](1);e.callbacklist.shift()}},__fail:function(){e.sendTimer=null;var j=e.callbacklist.length;while(j--){e.callbacklist[0](0);e.callbacklist.shift()}}};return d={send:function(j){return a.SCHEME[a.SCHEME_INFO](j)},getStatus:function(j){e.callbacklist.push(j)},__fail:c.__fail}})();var BDBridge=window.BDBridge||{};BDBridge.invite=BDBridge.invite||(function(){var l;var h=BDBridge.BD_BRIDGE_ROOT,c=BDBridge.BD_BRIDGE_DATA,a=BDBridge.BD_BRIDGE_INVITE_CONFIG,f=BDBridge.BD_BRIDGE_INVITE,j='<iframe id="BDBridgeInviteIframe" frameborder="0" marginheight="0" marginwidth="0" src="about:blank" style="display:none;_filter:alpha(opacity=0);"></iframe><div id="InviteContainer"><div id="bridgeTopContainer"><a id="bridgeinviteclose" href="javascript:;"></a><div class="bdbridge-clearfix"><div id="decorationskin" style=""></div><div id="inviteright"><div id="preinvitetext" style="line-height:1.2;"></div><div id="invitebtn" class="bridge-invite-button"><div id="chatnow" class="invite-button" style="margin-left:5px;width:81px;height:26px;line-height:26px;font-size:12px;text-align:center;text-decoration:none;" href="javascript:;">现在咨询</div><div id="chatlater" class="invite-button" style="width:81px;height:26px;background:url('+h+'img/matrix/btn.png) -88px 0;" href="javascript:;"></div></div></div></div></div></div>';var d=BDBridgeStat;var k={BDBRIDGE_INVITE_FULL:{width:310,height:144},chatType:{byInvite:0,bySelf:1,enforce:5,autoInvite:3},ROOT:BDBridge.BD_BRIDGE_ROOT+"res/invitebgcolorful/",BDBRIDGE_INVITE_SPECIAL:[{w:327,h:210,x:17,y:33,filename:"0.png",description:"新年快乐"},{w:363,h:208,x:25,y:32,filename:"1.png",description:"每时每刻"},{w:350,h:269,x:8,y:59,filename:"2.png",description:"快乐沟通"},{w:400,h:248,x:74,y:80,filename:"3.png",description:"粉红惊喜"},{w:350,h:238,x:11,y:53,filename:"4.png",description:"纸醉金迷"},{w:350,h:270,x:29,y:109,filename:"5.png",description:"缤纷乐园"},{w:380,h:211,x:24,y:27,filename:"6.png",description:"烂漫童趣"},{w:540,h:220,x:186,y:52,filename:"7.png",description:"二战风云"},{w:291,h:290,x:0,y:133,filename:"8.png",description:"灯绿酒红"},{w:397,h:273,x:45,y:80,filename:"9.png",description:"节日快乐"},{w:350,h:227,x:39,y:76,filename:"10.png",description:"礼品多多"},{w:330,h:226,x:10,y:60,filename:"11.png",description:"圣诞大礼"},{w:322,h:177,x:5,y:26,filename:"12.png",description:"圣诞大礼"},{w:450,h:300,x:100,y:105,filename:"13.png",description:"紫色迷情"},{w:450,h:330,x:107,y:140,filename:"14.png",description:"果绿青春"},{w:420,h:225,x:72,y:44,filename:"15.png",description:"国风书香"},{w:326,h:235,x:25,y:75,filename:"16.png",description:"蓝月亮"},{w:377,h:204,x:56,y:12,filename:"17.png",description:"龙年吉祥"},{w:326,h:235,x:0,y:12,filename:"18.png",description:"免费试学"},{w:295,h:227,x:0,y:0,filename:"19.png",description:"财神到"},{w:318,h:203,x:0,y:12,filename:"20.png",description:"金蛇报喜"},{w:249,h:281,x:0,y:0,filename:"21.png",description:"吉庆有余"}],DECORATION_SIZE:{width:98,height:128},BACKGROUND_SIZE:{width:310,height:144},DEFAULTTIP:"您可直接在这里和我们联系！"};var b={inviteTimer0:null,inviteTimer1:null,inviteTimer2:null,intervalTimer:null,inviteGroupId:"",inviteGroupName:"",inviteSubid:"",inviteSubname:"",manualInvited:0,autoInvited:0,inviteStatus:0,invited:0,handleMessList:[]};var e={__hide:function(){g("BDBridgeInviteWrap").style.display="none"},__show:function(){(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6)&&g("BDBridgeInviteIframe")&&(g("BDBridgeInviteIframe").style.display="block");g("InviteContainer")&&(g("InviteContainer").style.display="block");g("BDBridgeChatBox")&&(g("BDBridgeChatBox").style.display="block");g("BDBridgeInviteWrap")&&(g("BDBridgeInviteWrap").style.display="block");g("invitebtn").style.zoom=1},__keepShow:function(){b.inviteStatus=1;b.autoInvited=1;if(f.inviteauto==1){e.__show();if(f.invitedisaptype==1){var m=(f.invitedisaptime-0)*1000||20000;b.inviteTimer1=setTimeout(BDBridge.invite.__autoHide,m)}}},__autoHide:function(){b.inviteStatus=0;b.autoInvited=0;BDBridge.invite.__hide();if(f.inviterepeat==1){b.inviteTimer2=setTimeout(function(){BDBridge.invite.__keepShow()},30000)}},__ignore:function(){if(f.invitemanual==1&&b.manualInvited==1){clearTimeout(b.inviteTimer0);BDBridge.rcvbase.reject(e._handleRejct)}else{clearTimeout(b.inviteTimer1);BDBridge.invite.__autoHide()}},createInvite:function(){var o=BDBridge.Lib.G("BDBridgeWrap")||BDBridge.Lib.G("BDBridgeNewWrap"),m=a;if(!o){o=document.createElement("div");o.id="BDBridgeWrap"}var n=document.createElement("div");n.id="BDBridgeInviteWrap";o.appendChild(n);n.innerHTML=j;BDBridge.Lib.G("BDBridgeLS").style.background="#ccc";e.getPosition();e.setSkin();e.setDecoration();e.setSize();e.setText();e.setButton();e.bindEvents();if(m.head.show!=2&&m.mode==2){e.__createChatBox()}e.__hide()},getPosition:function(){var y=document.getElementById("InviteContainer"),v=document.getElementById("BDBridgeInviteWrap"),p=a,m=k.BDBRIDGE_INVITE_FULL,s=k.BDBRIDGE_INVITE_SPECIAL,u=p.show.pos-0,n=p.background.url,w=p.head.show,t=p.special,o=p.show.width,x=p.show.height;var r;if(window.innerWidth){r=window.innerWidth}else{if((document.body)&&(document.body.clientWidth)){r=document.body.clientWidth}}if(window.innerHeight){winHeight=window.innerHeight}else{if((document.body)&&(document.body.clientHeight)){winHeight=document.body.clientHeight}}if(w==2){o=s[t].w;x=s[t].h}else{if(n.indexOf("res/")!=-1){o=m.width;x=m.height}}if(w!=2&&p.mode==2){x+=51}switch(u){case 0:v.style.left="50%";v.style.top="50%";v.style.marginTop=-Math.ceil(x/2)+"px";v.style.marginLeft=-Math.ceil(o/2)+"px";break;case 1:v.style.top="auto";v.style.right="0";v.style.bottom="0";v.style.left="auto";break;case 2:v.style.top="auto";v.style.right="auto";v.style.bottom="0";v.style.left="0";break}},setSkin:function(){var o=a,p=k.BDBRIDGE_INVITE_SPECIAL,w=o.background,r=w.color,n=w.url,t=o.head.show,m=g("bridgeTopContainer"),s=g("inviteright"),u,v;if(t!=2){m.style.backgroundColor=r;m.style.backgroundImage=n?format("url(#{0})",n)+"":"";s.style.display="block"}else{v=p[o.special];u=v.filename?k.ROOT+v.filename:"";if(u){if(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]==6){m.style.backgroundImage="none";m.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+u+")"}else{m.style.background=format("url(#{0})",u)}}s.style.display="none"}},setDecoration:function(){var s=a,u=k.DECORATION_SIZE,r=g("decorationskin"),o=s.head,t=o.size,n=s.head.show,p=o.url,m=s.on;if(n==2){r.style.display="none";return}if(m){r.style.border="2px solid #fff";r.style.backgroundImage=p?format("url(#{0})",p)+"":"";if(p.indexOf("res/")!=-1){r.style.width="98px";r.style.height="128px"}else{if(t==1){r.style.width="98px";r.style.height="128px"}else{r.style.width="98px";r.style.height="78px";u.width=98;u.height=78}}r.style.visibility="visible"}else{r.style.visibility="hidden";r.style.width="98px";r.style.height="78px";u.width=98;u.height=78}},setText:function(){var p=a,o=k.DECORATION_SIZE,r=g("preinvitetext"),C=g("decorationskin"),n=o.height,B=p.text,y=p.show,s=y.font,w=y.fontsize,z=y.fontcolor,A,x=[];if(p.head.show==2){return}r.innerHTML=B;x[x.length]="color:"+z;x[x.length]="font-size:"+w+"px";x[x.length]="font-family:"+s;r.style.cssText+=";"+x.join(";")+";";for(var u=0,D,v=r.getElementsByTagName("a");D=v[u++];){D.style.color=z}A=r.offsetHeight;var t=((a.mode==0&&n==128)?15:0);isNaN(n)&&(n=0);var m=Math.ceil((n-A)/2-t);r.style.marginTop=(m<0?5:m)+"px"},setButton:function(){var r=a,o=g("chatlater"),p=g("chatnow"),t=r.mode,n=r.button,m=r.show,s=g("invitebtn");if(t==0){p.style.display="block";o.style.display="block";p.style.background=n}else{p.style.display="none";o.style.display="none";p.style.background=n}o.onclick="";p.onclick="";p.onmouseover=function(){addClass(this,"invite-button-hover")};o.onmouseover=function(){addClass(this,"invite-button-hover")};p.onmouseout=function(){removeClass(this,"invite-button-hover")};o.onmouseout=function(){removeClass(this,"invite-button-hover")}},setSize:function(){var I=a,v=k.BDBRIDGE_INVITE_SPECIAL,s=k.BDBRIDGE_INVITE_FULL,n=k.DECORATION_SIZE,G=k.BACKGROUND_SIZE,B=I.show.width,z=I.show.height,p=I.background.url,D=I.background.color,y=g("BDBridgeInviteWrap"),r=g("bridgeTopContainer"),w=g("InviteContainer"),J=g("preinvitetext"),u=g("decorationskin"),C=g("ChatBox"),m=g("BDBridgeChatArea"),t=g("BDBridgeInviteIframe"),H=I.head.show,F=[],A;if(H!=2){if(p.indexOf("res/")!=-1){B=s.width;z=s.height}A=n.width;var x=B-A-30;J.style.width=(x>0?x:0)+"px";if(C){var E=B-12;var o=B-12-46;C.style.width=(E>0?E:0)+"px";m.style.width=(o>0?o:0)+"px"}}else{F=v[I.special];z=F.h;B=F.w;r.style.cursor="pointer"}w.style.width=B+"px";w.style.height=z+"px";y.style.width=B+"px";setTimeout(function(){r.style.height=z+"px";r.style.width=B+"px"},0);G.width=B;G.height=z;if(!t){return}if(H!=2&&I.mode==2){t.style.width=B+"px";t.style.height=z+50+"px"}else{t.style.width=B+"px";t.style.height=z+"px"}},setIframeSize:function(){var n=BDBridge.Lib.G("BDBridgeInviteWrap"),m=BDBridge.Lib.G("BDBridgeInviteIframe");if(!m){return}m.style.width=n.offsetWidth+"px";m.style.height=n.offsetHeight+"px"},bindEvents:function(){var o=a,m=o.head.show,p=o.mode;if(m==2||p==1){BDBridge.Lib.G("InviteContainer").style.cursor="pointer";BDBridge.Lib.G("InviteContainer").onclick=e.bridgeInviteOpen}else{if(p==0){BDBridge.Lib.G("chatlater").onclick=bridgeInviteClose;BDBridge.Lib.G("chatnow").onclick=e.bridgeInviteOpen}}BDBridge.Lib.G("bridgeinviteclose").onclick=function(r){var r=r||window.event;if(r.stopPropagation){r.stopPropagation()}else{r.cancelBubble=true}BDBridge.Lib.stopDefault(r);bridgeInviteClose()};var n=BDBridge.Lib.G("BDBridgeInviteWrap");if(!BDBridge.Lib.ie||(BDBridge.Lib.ie6plus&&!BDBridge.Lib.onQuirkMode)){n.style.position="fixed"}else{n.style.position="absolute";e.scroll();window.attachEvent("onscroll",e.scroll);window.attachEvent("onresize",e.scroll)}},scroll:function(){var s=!BDBridge.Lib.onQuirkMode?document.documentElement:document.body;var w=BDBridge.Lib.G("BDBridgeInviteWrap");var o=a,m=k.BDBRIDGE_INVITE_FULL,p=k.BDBRIDGE_INVITE_SPECIAL,t=o.show.pos-0,n=o.background.url,u=o.head.show,r=o.special,v=o.show.height;if(u==2){v=p[r].h}else{if(n.indexOf("res/")!=-1){v=m.height}}if(u!=2&&o.mode==2){v+=51}switch(t){case 0:w.style.top=parseInt(s.clientHeight/2,10)+s.scrollTop+"px";break;case 1:case 2:w.style.bottom="auto";w.style.top=s.clientHeight+s.scrollTop-v-5+"px";break}},__findInGroup:function(w){var v=c.group;var o="";var u="";var x="";for(var t=0,p=v.length;t<p;t++){var s=v[t]["user"];var m=s.length;for(var r=0;r<m;r++){if(w==s[r]["subid"]){o=v[t]["groupid"];u=v[t]["groupname"];x=s[r]["subname"];break}}}o=(o==="")?v[0]["groupid"]:o;u=(u==="")?v[0]["groupname"]:u;return({groupid:o,groupname:u,subname:x})},bridgeInviteOpen:function(){var o={};if(e.__detecSub()){if(b.manualInvited==1){o.subid=b.inviteSubid;o.groupid=b.inviteGroupId;o.groupname=b.inviteGroupName;o.subname=b.inviteSubname;d("ACCEPT_INVITE",{siteId:c.SITE_ID,mainId:c.mainid},{subId:o.subid,open:1});o.chattype=k.chatType.byInvite;BDBridge.Lib.webim.accept(o)}else{o.chattype=k.chatType.autoInvite;BDBridge.Lib.webim.accept(o)}}else{var n=BDBridge.invite.__getHandleList();if(n&&n.length>0){for(var m in n){n[m]("")}}}BDBridge.invite.__hide();BDBridge.invite.__doClear()},__createChatBox:function(){var v=k.BACKGROUND_SIZE;var r=document.createElement("div");r.id="BDBridgeChatBox";r.innerHTML='<div id="BDBridgeChatBg"></div><div id="BDBridgeChatBgMiddle"></div><textarea id="BDBridgeChatArea" style="color:#999">'+k.DEFAULTTIP+'</textarea><a href="javascript:;" id="BDBridgeStartChat" hidefocus="true">&nbsp;</a>';var n=BDBridge.Lib.G("BDBridgeInviteWrap");n.appendChild(r);var s=BDBridge.Lib.G("InviteContainer");var m=BDBridge.Lib.G("BDBridgeChatArea");var u=BDBridge.Lib.G("bridgeinviteclose");var o=(v.width-70>0)?(v.width-70):0;var p=v.width-9;r.style.width=(p>0?p:0)+"px";m.style.width=o+"px";var t=BDBridge.Lib.G("BDBridgeChatBgMiddle");t.style.width=o+"px";if(BDBridge.Lib.ie&&BDBridge.Lib.onQuirkMode){u.style.height="10px";r.style.width=v.width+3+"px";r.style.height="62px";m.style.width=o+"px";m.style.height="35px"}m.onfocus=function(){if(this.value==k.DEFAULTTIP){this.value="";this.style.color="#000"}};m.onblur=function(){if(BDBridge.Lib.trim(this.value)==""){this.value=k.DEFAULTTIP;this.style.color="#999"}};BDBridge.Lib.G("BDBridgeStartChat").onclick=function(z){BDBridge.Lib.stopDefault(z);var A={},y={};A.subid=b.inviteSubid;A.groupid=b.inviteGroupId;A.groupname=b.inviteGroupName;A.subname=b.inviteSubname;m.value&&(A.chat=m.value);if(e.__detecSub()){if(b.manualInvited==1){d("ACCEPT_INVITE",{siteId:c.SITE_ID,mainId:c.mainid},{subId:A.subid,open:1});A.chattype=k.chatType.byInvite;BDBridge.Lib.webim.accept(A)}else{A.chattype=k.chatType.autoInvite;BDBridge.Lib.webim.accept(A)}}else{var x=BDBridge.invite.__getHandleList();if(x&&x.length>0){for(var w in x){x[w](m.value)}}}BDBridge.invite.__hide();e.__doClear()}},__detecSub:function(){var o=c.group;for(var m=0,n;n=o[m++];){if(n.online){return true}}return false},__doClear:function(){clearTimeout(b.inviteTimer0);clearTimeout(b.intervalTimer);clearTimeout(b.inviteTimer1);clearTimeout(b.inviteTimer2)},_handleRejct:function(){b.inviteStatus=0;b.manualInvited=0;BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_0",1);if(f.inviterepeat==1){BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_0",0)}else{BDBridge.Lib.cookie.setRaw("BRIDGE_REFRESH",15000)}BDBridge.invite.__hide()},handleShow:function(n){if(f.invitemanual!=1){return}if(BDBridge.Lib.cookie.getRaw("BRIDGE_INVITE_0")==null){BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_0",0)}if(BDBridge.Lib.cookie.getRaw("BRIDGE_INVITE_0")==0&&n.status==1){b.invited==1;b.inviteStatus=1;b.manualInvited=1;b.inviteSubid=n.subid;var m=e.__findInGroup(n.subid);b.inviteGroupId=m.groupid;b.inviteGroupName=m.groupname;b.inviteSubname=m.subname;e.__show();if(f.invitedisaptype==1){var o=(f.invitedisaptime-0)*1000||20000;b.inviteTimer0=setTimeout(function(){BDBridge.rcvbase.reject(e._handleRejct)},o)}}},handleAutoShow:function(){b.intervalTimer=setTimeout(BDBridge.invite.__keepShow,f.invitetime*1000)},handleStopMouseup:function(){if(document.getElementById("BDBridgeNewWrap")||document.getElementById("BDBridgeWrap")){(document.getElementById("BDBridgeNewWrap")||document.getElementById("BDBridgeWrap")).onmouseup=null}}};return l={__ignore:e.__ignore,__hide:e.__hide,__show:e.__show,__createChatBox:e.__createChatBox,__doClear:e.__doClear,chatRender:false,__getHandleList:function(){return b.handleMessList},__setHandleList:function(m){b.handleMessList.push(m)},__autoHide:e.__autoHide,__keepShow:e.__keepShow,init:function(){g=BDBridge.Lib.G;addClass=BDBridge.Lib.addClass;removeClass=BDBridge.Lib.removeClass;format=BDBridge.Lib.string.format;q=BDBridge.Lib.Q;each=BDBridge.Lib.each;a=BDBridge.BD_BRIDGE_INVITE_CONFIG;f=BDBridge.BD_BRIDGE_INVITE;if(typeof a.special=="undefined"){a.special=0}BDBridge.Lib.loadCss(h+"asset/css/m-front-invite.css?v=20130705");e.createInvite();if(a.background.url!=""){a.background.url+="?_t="+(new Date()).getTime().toString()}if(a.head.url!=""){a.head.url+="?_t="+(new Date()).getTime().toString()}if(window.opera){window.scroll(0,0)}BDBridge.rcvbase.doAutoInvite(e.handleAutoShow);BDBridge.rcvbase.doInvite(e.handleShow)}}})();function bridgeInviteClose(){BDBridge.invite.__ignore()}function bridgeInviteStretch(b,a){BDBridge.Lib.swf.getMovie("BDBridgeInvite").setAttribute("width",b);BDBridge.Lib.swf.getMovie("BDBridgeInvite").setAttribute("height",a);BDBridge.Lib.G("BDBridgeInviteWrap").style.width=b+"px";BDBridge.Lib.G("BDBridgeInviteWrap").style.height=a+"px";BDBridge.Lib.G("BDBridgeInviteWrap").style.marginLeft=-Math.ceil(b/2)+"px";BDBridge.Lib.G("BDBridgeInviteWrap").style.marginTop=-Math.ceil(a/2)+"px";if(BDBridge.BD_BRIDGE_INVITE_CONFIG.head.show!=2&&BDBridge.BD_BRIDGE_INVITE_CONFIG.mode==2&&!BDBridge.invite.chatRender){BDBridge.invite.__createChatBox();BDBridge.invite.chatRender=true}if(BDBridge.BD_BRIDGE_INVITE_CONFIG.mode==2){BDBridge.Lib.G("BDBridgeChatBox").style.display="block"}}var Qiao=function(){var b=this,a=function(d,c){return(d&&d.hasOwnProperty&&(d instanceof c))};if(!(a(b,Qiao))){b=new Qiao()}else{b._init()}return b};(function(){var e,h=Array.prototype.slice,d=Object.prototype.toString,f=".",b={mods:{},_attached:{},_loaded:{},_events:{}};function c(j){return function(){throw new Error("need to implement "+j)}}function a(l,k,j){j.fire=j.fire||function(m){var n=Array.prototype.slice.call(arguments);n.unshift(k);l.fire.apply(l,n)};j.on=j.on||function(m,n){l.on(k,m,n)}}e={_init:function(){var m=this,j="Qiao_"+(+new Date()).toString(16),l=b._attached,k=b._events;m.id=j;l[j]={};k[j]={}},define:function(j,m,l){var k={name:j};if(!l){l=m;m=[]}m=m||[];k.fn=l;k.requires=m;b.mods[j]=k},use:function(){var k=h.call(arguments,0),s=k[k.length-1],p=b.mods,o=this,m,j,n=[];if(d.call(s)==="[object Function]"){k.pop()}else{s=null}if(d.call(k[0])==="[object Array]"){k=k[0]}for(m=0,j=k.length;m<j;m++){n.push(k[m])}if(o._attach(n)){s(o)}},_attach:function(y){var u=this,x=b.mods,k=b._attached,n=k[u.id],m,w,v,t,s,r,o=y.length,p;for(s=0;s<o;s++){m=y[s];if(n[m]){continue}p=u._namespace(m);w=x[m];if(!w){continue}n[m]=true;v=w&&w.requires;if(v){for(r=0;(t=v[r]);r++){if(!n[t]){if(!u._attach(v)){return false}break}}}if(w.fn){a(u,m,p);w.fn(u,p);if(p.interfaces&&d.call(p.interfaces)=="[object Array]"){for(r=0;t=p.interfaces[r];r++){p[t]=c(t)}}}}return true},_namespace:function(){var n=arguments,t,r=0,m,p,s,k;for(m=n.length;r<m;r++){t=this;k=n[r];if(k.indexOf(f)>-1){s=k.split(f);for(p=(s[0].toLowerCase()=="qiao")?1:0;p<s.length;p++){t[s[p]]=t[s[p]]||{};t=t[s[p]]}}else{t[k]=t[k]||{};t=t[k]}}return t},implement:function(n,m){var j=n.interfaces||[],k,l;for(k=0;l=j[k];k++){if(m[l]){n[l]=m[l]}}},fire:function(n,j){var p=this,m,o,k=Array.prototype.slice.call(arguments),l=b._events[p.id];l=l[n]||{};l=l[j]||[];k.splice(0,2);for(m=0;o=l[m];m++){o.apply(null,k)}},on:function(l,j,n){var m=this,k=b._events[m.id];k=k[l]?k[l]:(k[l]={});k=k[j]?k[j]:(k[j]=[]);k.push(n)}};Qiao.prototype=e;Qiao.define=e.define;Qiao.cb={}}());Qiao.define("base.loader",null,function(b,a){var e=document,h=(function(){var j=navigator.userAgent;return{async:e.createElement("script").async===true,firefox:/firefox\/(\d+\.\d+)/i.test(j)?+RegExp["\x241"]:undefined,ie:/msie (\d+\.\d+)/i.test(j)?(document.documentMode||+RegExp["\x241"]):undefined,isStrict:document.compatMode=="CSS1Compat",isGecko:/gecko/i.test(j)&&!/like gecko/i.test(j),isWebkit:/webkit/i.test(j),opera:/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(j)?+(RegExp["\x246"]||RegExp["\x242"]):undefined}}()),d=h.ie?0:(h.opera?1:2);var c={createNode:function(k,l){var j,m=e.createElement(k);for(j in l){if(l.hasOwnProperty(j)){m.setAttribute(j,l[j])}}return m},load:function(k,l,j,m){if(typeof j=="function"){m=j;j={}}new f(k,l,j,m)},merge:function(l,k){for(var j in k){if(k.hasOwnProperty(j)){l[j]=k[j]}}return l}};function f(o,n,s,p){var r=this,k,j=o=="js"?e.getElementsByTagName("body")[0]:e.getElementsByTagName("head")[0],l,m;r.callback=p||function(){};r.queue=[];n=(typeof n=="string"?[n]:n);for(l=0,m=n.length;l<m;l++){this.queue[l]=1;if(o=="css"){if(!h.isGecko){k=c.createNode("link",c.merge({type:"text/css",rel:"stylesheet",href:n[l]},s))}else{k=c.createNode("style");k.innerHTML='@import "'+n[l]+'";'}}else{k=c.createNode("script",c.merge({type:"text/javascript",src:n[l],charset:"utf-8"},s))}if(d){if(o=="css"&&d==2){(function(){var t=0,u=setInterval(function(){try{k.sheet.cssRules;clearInterval(u);r._callback()}catch(v){t+=1;if(t>100){clearInterval(u);r._callback()}}},100)}())}else{k.onload=function(){r._callback()}}}else{k.onreadystatechange=function(){if(/^loaded|complete$/.test(this.readyState)){this.onreadystatechange=null;r._callback()}}}}j.appendChild(k)}f.prototype={_callback:function(){var j=this;if(j.queue.pop()&&(j.queue==0)){j.callback()}}};a.css=function(k,j,l){return c.load("css",k,j,l)};a.js=function(k,j,l){return c.load("js",k,j,l)}});var BDBridge=window.BDBridge||{};BDBridge.webimlite=BDBridge.webimlite||(function(){var b={},j=null,k=BDBridge.BD_BRIDGE_ROOT||"http://qiao.baidu.com/v3/";b.chatType={byInvite:0,bySelf:1,enforce:5};function d(){var n=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo)||"{}";return BDBridge.Lib.json.parse(n)}function e(o){var n=d();for(var p in o){if(o.hasOwnProperty(p)){n[p]=o[p]}}BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo,BDBridge.Lib.json.stringify(n))}function c(n){BDBridge.webimlite._qiao=n;j=n.business.webimlite;var o=BDBridge.BD_BRIDGE_WEBIM;j.on("revertsession",function(){BDBridge.BD_BRIDGE_WEBIM.webimopentype=1;BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,1)});j.on("unload",function(){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,0)});j.on("ready",function(){var p=d();p.lc=p.lc?parseInt(p.lc,10):0;e({lc:p.lc+1});BDBridge.BD_BRIDGE_WEBIM.webimopentype=1});j.on("changesubid",function(p){e({ls:p})});j.init({bid:b.bid,siteid:b.siteid,mainid:b.mainid||0,SITE_ID:b.SITE_ID||0,userName:b.userName,offsetTime:b.offsetTime,root:k,bgColor:o.webimbgcolor||"",position:o.floatposition||0,csNameType:(typeof o.floatChatName!="undefined"?o.floatChatName:-1),customName:o.floatCustomname||"",searchInfo:b.searchInfo})}function a(s,n){var p=["referrer","location","title","word","wordtype","wordid","from"],o,r;b.bid=s.bid;b.siteid=s.siteid;b.userName=s.userName;b.groups=n;b.mainid=s.mainid;b.SITE_ID=s.SITE_ID;b.offsetTime=0;b.searchInfo={};for(o=0;r=p[o];o++){b.searchInfo[r]=s[r]||""}Qiao().use(["base.loader"],function(t){t.base.loader.css(k+"asset/css/m-webim-lite.css?v=20130705");t.base.loader.js(k+"asset/js/m-webim-lite.js?v=20140116",{},function(){Qiao().use(["business.webimlite"],c)})})}function m(x){var w=b.groups;var p="";var v="";var y="";for(var u=0,r=w.length;u<r;u++){var t=w[u]["user"];var o=t.length;for(var s=0;s<o;s++){if(x==t[s]["subid"]){p=w[u]["groupid"];v=w[u]["groupname"];y=t[s]["subname"];break}}}p=(p==="")?w[0]["groupid"]:p;v=(v==="")?w[0]["groupname"]:v;return({groupid:p,groupname:v,subname:y})}function f(o){var p;if(o.status==4){p=m(o.subid);var n={type:0,chattype:b.chatType.enforce,tid:p.groupid,subid:o.subid,groupname:p.groupname};l(n)}}function h(o){if(o.status==0){var p=o.groupid;var n=o.groupname;if(j.accept({type:b.vis_type,chattype:b.chattype,bridgeTid:p,subid:b.vis_subid||"",userGroupName:n})){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,1)}}}function l(y){var v=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance);var o=BDBridge.BD_BRIDGE_ROOT+"?module=default&controller=webim&action=visdistribute";var t=y.type;var r=y.tid;var w=y.subid;var s=y.groupname;var u=y.from;var n=y.lastsubid;var x=y.siteid;if(v||!j){return}if(r===""){t=3;b.vis_type=t;b.vis_subid=w;b.vis_from=u;b.lastsubid=n;b.chattype=y.chattype;var p="&siteid="+x+"&groupid="+r+"&groupname="+s+"&from="+u+"&lastsubid="+n+"&callback=BDBridge.webimlite.handleVisDistribute";BDBridge.Lib.loadScript("BDBridgeVisDistribute",o+p)}else{if(j.accept({type:t,chattype:y.chattype,bridgeTid:r,subid:w||"",userGroupName:s})){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,1)}}}return{init:function(){BDBridge.rcvbase.addEnterHandler(a);BDBridge.rcvbase.addRefreshHandler(f)},chat:l,show:function(){j.show()},handleVisDistribute:h}})();var BDBridge=window.BDBridge||{};BDBridge.rcv=BDBridge.rcv||(function(){var c;var a={};var d={};var b={_bind:function(){BDBridge.Lib.bind(window,"unload",BDBridge.rcvbase.stopMonitor);BDBridge.Lib.bind(window,"load",BDBridge.rcvbase.startMonitor)}};return c={init:function(){b._bind()}}})();var BDBridge=window.BDBridge||{};BDBridge.Lib=BDBridge.Lib||{ls:baiduLS.localStorage,lsHTML:'<div id="BDBridgeLS"></div>',lsId:"bridge",lsKey:{bid:BDBridge.BD_BRIDGE_DATA.siteid+"bid24",data:BDBridge.BD_BRIDGE_DATA.siteid+"data",last:BDBridge.BD_BRIDGE_DATA.siteid+"last",show:BDBridge.BD_BRIDGE_DATA.siteid+"show",instance:BDBridge.BD_BRIDGE_DATA.siteid+"instance",chat:BDBridge.BD_BRIDGE_DATA.siteid+"chat",startload:BDBridge.BD_BRIDGE_DATA.siteid+"startload",prevInfo:BDBridge.BD_BRIDGE_DATA.siteid+"previousInfo",offsetTime:BDBridge.BD_BRIDGE_DATA.siteid+"offsetTime",firstInfo:BDBridge.BD_BRIDGE_DATA.siteid+"firstInfo"},define:function(b,e){var a,c,d=window;b=b.split(".");for(a=0;c=b[a];a++){if(!d[c]){d[c]={}}d=d[c]}e.call(null,d);return d},iconInit:function(){BDBridge.Lib.ls_callback_list.push(BDBridge.Icon.init)},pigeonInit:function(){BDBridge.Lib.ls_callback_list.push(BDBridge.pigeon.init)},inviteInit:function(){BDBridge.Lib.ls_callback_list.push(BDBridge.invite.init)},rcvInit:function(){BDBridge.Lib.ls_callback_list.push(BDBridge.rcv.init)},webimliteInit:function(){BDBridge.Lib.ls_callback_list.push(BDBridge.webimlite.init)},openBD:[],getBridge:function(){BDBridge.Lib.openBD=[BDBridge.Lib.iconInit,BDBridge.Lib.pigeonInit,BDBridge.Lib.inviteInit,BDBridge.Lib.rcvInit,BDBridge.Lib.webimliteInit];var b=BDBridge.OPEN_MODULAR,d=parseInt(b,2),a=BDBridge.Lib.openBD;while(d){var c=d%2;if(c){a[0]();a.shift()}d=parseInt(d/2)}},ls_callback_list:[],getPageConfig:function(){var f=window.location.href,c=BDBridge.BD_BRIDGE_SPECIAL,b=c?c.length:0,e,d;var a=null;for(d=0;d<b;d++){e=c[d];if(f==e.url||f.indexOf(e.url)>=0){!a&&(a=e);a&&(a.url)&&(a.url.length<e.url.length)&&(a=e)}}return a},getBridgeStyleConfig:function(){var c=BDBridge.Lib.getPageConfig(),e=BDBridge.BD_BRIDGE_STYLE_ITEM,a=e.length,d,b;if(!c){for(b=0;b<a;b++){d=e[b];if(d.pageid=="0"){return d}}}else{for(b=0;b<a;b++){d=e[b];if(d.pageid==c.id){return d}}}},init:function(){var a=BDBridge.Lib.getBridgeStyleConfig();BDBridge.BD_BRIDGE_ICON_CONFIG=a.BD_BRIDGE_ICON_CONFIG;BDBridge.BD_BRIDGE_INVITE_CONFIG=a.BD_BRIDGE_INVITE_CONFIG;BDBridge.BD_BRIDGE_INVITE=a.BD_BRIDGE_INVITE;BDBridge.BD_BRIDGE_PIGEON_SOUL=a.BD_BRIDGE_PIGEON_SOUL;BDBridge.BD_BRIDGE_GROUP=a.BD_BRIDGE_GROUP;BDBridge.BD_BRIDGE_WEBIM=a.BD_BRIDGE_WEBIM||{};BDBridge.Lib.cookie.setRaw("BRIDGE_INVITE_0",0);BDBridge.Lib.ie=/msie (\d+)/.exec(navigator.userAgent.toLowerCase());BDBridge.Lib.ie6plus=BDBridge.Lib.ie&&parseInt(BDBridge.Lib.ie[1])>6;BDBridge.Lib.onQuirkMode=document.compatMode=="CSS1Compat"?false:true;BDBridge.Lib.mobile=function(){var d=navigator.userAgent;return !!d.match(/.*Mobile.*/)||("ontouchstart" in window)}();if(BDBridge.Lib.ie&&!BDBridge.Lib.ie6plus){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}var c=document.createElement("div");c.id=BDBridge.Lib.G("BDBridgeWrap")?"BDBridgeNewWrap":"BDBridgeWrap";BDBridge.Lib&&BDBridge.Lib.domReady(function(){c.innerHTML+=BDBridge.Lib.lsHTML;document.body.appendChild(c);BDBridge.Lib.getBridge();BDBridge.Lib.localstorage.createLs();function d(f){f=f||window.event;if(f.stopPropagation){f.stopPropagation()}else{f.cancelBubble=true}}BDBridge.Lib.bind(c,"mousedown",d);BDBridge.Lib.bind(c,"mouseup",d)})},cookie:{isValidKey:function(a){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+\x24')).test(a)},getRaw:function(c){if(!BDBridge.Lib.cookie.isValidKey(c)){return null}var b=new RegExp("(^| )"+c+"=([^;]*)(;|\x24)");var a=b.exec(document.cookie);if(a){return a[2]||null}return null},setRaw:function(c,b,d){if(!BDBridge.Lib.cookie.isValidKey(c)){return false}d=d||{};var a;switch(typeof(d.expires)){case"number":a=new Date();a.setTime(a.getTime()+d.expires);break;case"object":if(d.expires instanceof Date){a=d.expires}}document.cookie=c+"="+b+(d.path?"; path="+d.path:"")+(a?"; expires="+a.toGMTString():"")+(d.domain?"; domain="+d.domain:"")+(d.secure?"; secure":"");return true}},url:{parseQuery:function(k,e){if(e){var h=new RegExp("(^|&|\\?|#)"+BDBridge.Lib.string.escapeReg(e)+"=([^&]*)(&|\x24)","");var j=k.match(h);if(j){return j[2]}}else{if(k){k=k.substr(k.indexOf("?")+1,k.length);var m=k.split("&");var l={},b=[],c,d,f;for(var a=0;a<m.length;a++){c=m[a].split("=");d=c[0],f=c[1];if(d===""){continue}if(typeof l[d]=="undefined"){l[d]=f}else{if(BDBridge.Lib.isString(l[d])){continue}else{l[d].push(f)}}}return l}}return null}},isString:function(a){return(typeof a=="object"&&a&&a.constructor==String)||typeof a=="string"},string:{escapeReg:function(a){return String(a).replace(new RegExp("([.*+?^=!:\x24{}()|[\\]/\\\\])","g"),"\\\x241")},format:function(c,a){c=String(c);var b=Array.prototype.slice.call(arguments,1),d=Object.prototype.toString;if(b.length){b=b.length==1?(a!==null&&(/\[object Array\]|\[object Object\]/.test(d.call(a)))?a:b):b;return c.replace(/#\{(.+?)\}/g,function(e,h){var f=b[h];if("[object Function]"==d.call(f)){f=f(h)}return("undefined"==typeof f?"":f)})}return c}},parseUrlParam:function(a){var c,d=[],b;for(c in a){if(a[c]!==undefined&&a[c]!==""&&a[c]!="undefined"&&a.hasOwnProperty(c)){d[d.length]=c+"="+encodeURIComponent(a[c])}}b=d.join("&");return b},webim:(function(){var d;var b=[],f=BDBridge.BD_BRIDGE_DATA;var j=function(t){var y=b.length,p=t.groupid,o=t.groupname,A=t.chat,m=t.subid,B=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.bid),C={},s=t.subname,u=BDBridge.BD_BRIDGE_WEBIM.webimopentype;while(y--){b[0]();b.shift()}if(BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance)==null){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,0)}if(A){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.chat,A)}if(BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.last)==null){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.last,(new Date()).getTime())}if((new Date()).getTime()-BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.last)>1800*1000){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance,0)}BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.last,(new Date()).getTime());if(BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.instance)==0){if(p==undefined){t.groupid="";t.groupname="";p=""}f.tid=p;f.subid="";if(m!==""&&m!==undefined){f.type=0;f.subid=m;f.subname=s}else{f.type=1;f.subid="";f.subname="";t.subid="";t.subname=""}t.groupid=""+t.groupid;t.subid=""+t.subid;BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.startload,(new Date()).getTime().toString());BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.data,f);var z=BDBridge.Lib.ls.read(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.prevInfo)||"{}";z=BDBridge.Lib.json.parse(z);var x=z.ls||"";if(BDBridge.Lib.mobile){t.type=f.type;if((t.type==1)&&(p===""||p===undefined)){t.type=3}c(t,B)}else{if(!u){t.ref=window.location.href;var r="siteid="+f.siteid+"&lastsubid="+x+"&from="+encodeURIComponent(f.from)+"&bid="+B+"&"+BDBridge.Lib.parseUrlParam(t);var n=(window.screen.availWidth-796)/2;var w=(window.screen.availHeight-562)/2;var v="left="+n+",top="+w+",resizable=yes,width=795,height=561";var k=window.open(BDBridge.BD_BRIDGE_ROOT+"?module=default&controller=webim&action=index&"+r,"BrIdgeIMWinDow",v);k.focus()}else{var l={type:f.type,chattype:t.chattype,tid:t.groupid,subid:t.subid,groupname:t.groupname,from:f.from,lastsubid:x,siteid:f.siteid};BDBridge.webimlite.chat(l)}}}else{if(!u){BDBridge.Lib.ls.write(BDBridge.Lib.lsId,BDBridge.Lib.lsKey.show,1)}else{BDBridge.webimlite.show()}}};var a=function(m,l){var k="http://webim.qiao.baidu.com/mobilewebim/webim.html?siteid="+f.siteid+"&siteidstr="+f.SITE_ID+"&mainid="+f.mainid+"&csNameType=2&csName="+encodeURIComponent("在线客服")+"&userName="+encodeURIComponent(f.userName)+"&groupName="+encodeURIComponent(m.groupname)+"&groupid="+m.groupid+"&sub="+m.subid+"&type="+m.type+"&bid="+l;window.open(k,"BridgeImWindow")};function c(l,k){if(l.groupid===""){l.groupid=h.option.tid;l.groupname=h.option.groupname}a(l,k)}var h=function(k){if(k.status==0){h.option={tid:k.groupid,groupname:k.groupname}}};var e=function(l,k){if(k){b.push(k)}j(l)};return d={accept:e,handleVisDistribute:h}})(),localstorage:(function(){var c;var d={swf:function(){return b()},html:function(){}};var a="swf";var b=function(){BDBridge.Lib.ls.onLoadInit=function(){var f=BDBridge.Lib.ls_callback_list.length;while(f--){BDBridge.Lib.ls_callback_list[0]();BDBridge.Lib.ls_callback_list.shift()}};var e=BDBridge.Lib.G("BDBridgeLS");e.style.width="1px";e.style.height="1px";e.style.fontSize="0px";e.style.lineHeight="0px";BDBridge.Lib.ls.load({id:"BDBridgeSwf",width:2,height:2,url:BDBridge.BD_BRIDGE_ROOT+"swf/local_storage.swf",wmode:"transparent",allowscriptaccess:"always"},"BDBridgeLS");BDBridge.Lib.G("BDBridgeLS").style.background="#fff"};return c={createLs:function(){return d[a]()}}})(),swf:{version:"11.1.102.0",createHTML:function(e){e=e||{};var o=BDBridge.Lib.swf.version,f=1;var r=e.ver||"6.0.0",s,b;if(o){o=o.split(".");r=r.split(".");for(var a=0;a<3;a++){s=parseInt(o[a],10);b=parseInt(r[a],10);if(b<s){break}else{if(b>s){f=0;break}}}}else{f=0}if(!f){return""}var m=e.vars;var a,c,p,h;var n=["classid","codebase","id","width","height","align"];e.align=e.align||"middle";e.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";e.codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0";e.movie=e.url||"";delete e.vars;delete e.url;if(BDBridge.Lib.isString(m)){e.flashvars=m}else{var k=[];for(c in m){h=m[c];if(h){k.push(c+"="+encodeURIComponent(h))}}e.flashvars=k.join("&")}var l=["<object "];for(a=0,p=n.length;a<p;a++){h=n[a];l.push(" ",h,'="',e[h],'"')}l.push(">");var d={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(c in e){h=e[c];if(d[c]&&h){l.push('<param name="'+c+'" value="'+h+'" />')}}e.src=e.movie;e.name=e.id;delete e.id;delete e.movie;delete e.classid;delete e.codebase;e.type="application/x-shockwave-flash";e.pluginspage="http://www.macromedia.com/go/getflashplayer";l.push("<embed");var j;for(c in e){h=e[c];if(h){if((new RegExp("^salign\x24","i")).test(c)){j=h;continue}l.push(" ",c,'="',h,'"')}}if(j){l.push(' salign="',j,'"')}l.push("></embed></object>");return l.join("")},create:function(a,b){a=a||{};var d=BDBridge.Lib.swf.createHTML(a);var c=true;if(b&&BDBridge.Lib.isString(b)){b=document.getElementById(b)}if(d.length<=0){d=a.errorMessage||"";c=false}if(b){b.innerHTML=d}else{document.write(d)}return c},getMovie:function(a){return document[a]||window[a]}},each:function(e,c){var b,a,d;if("function"==typeof c){for(a in e){if(e.hasOwnProperty(a)){d=e[a];b=c.call(e,d,a);if(b===false){break}}}}return e},trim:function(b){var a=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");return b.replace(a,"")},G:function(a){if(!a){return null}if("string"==typeof a||a instanceof String){return document.getElementById(a)}else{if(a.nodeName&&(a.nodeType==1||a.nodeType==9)){return a}}return null},Q:function(j,e,b){var k=[],d=BDBridge.Lib.trim,h,f,a,c;if(!(j=d(j))){return k}if("undefined"==typeof e){e=document}else{e=BDBridge.Lib.G(e);if(!e){return k}}b&&(b=d(b).toUpperCase());if(e.getElementsByClassName){a=e.getElementsByClassName(j);h=a.length;for(f=0;f<h;f++){c=a[f];if(b&&c.tagName!=b){continue}k[k.length]=c}}else{j=new RegExp("(^|\\s)"+BDBridge.Lib.string.escapeReg(j)+"(\\s|\x24)");a=b?e.getElementsByTagName(b):(e.all||e.getElementsByTagName("*"));h=a.length;for(f=0;f<h;f++){c=a[f];j.test(c.className)&&(k[k.length]=c)}}return k},addClass:function(f,h){f=BDBridge.Lib.G(f);if(!f){return}var b=h.split(/\s+/),a=f.className,e=" "+a+" ",d=0,c=b.length;for(;d<c;d++){if(e.indexOf(" "+b[d]+" ")<0){a+=(a?" ":"")+b[d]}}f.className=a;return f},removeClass:function(f,h){f=BDBridge.Lib.G(f);if(!f){return}var d=f.className.split(/\s+/),k=h.split(/\s+/),b,a=k.length,c,e=0;for(;e<a;++e){for(c=0,b=d.length;c<b;++c){if(d[c]==k[e]){d.splice(c,1);break}}}f.className=d.join(" ");return f},loadScript:function(d,b){var c=document.getElementsByTagName("head")[0];if(BDBridge.Lib.G(d)){BDBridge.Lib.G(d).parentNode.removeChild(BDBridge.Lib.G(d))}var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("language","javascript");a.setAttribute("id",d);a.setAttribute("src",b);a.setAttribute("charset","UTF-8");c.appendChild(a)},imgRequest:function(c,d){var b=new Image();var a="_LOG_WEB_"+(new Date().getTime())+"_";window[a]=b;b.onload=b.onerror=function(){window[a]=null};b.src=c+d;b=null},createIframe:function(d,a,c){var b=document.createElement(BDBridge.Lib.ie&&BDBridge.Lib.ie[1]<9?'<iframe name="'+a+'">':"iframe");b.setAttribute("id",d);b.setAttribute("name",a);b.style.cssText=c;b.setAttribute("src","#");b.setAttribute("style",c);document.body.appendChild(b);return b},createForm:function(h,f,b,c,d,e){var a=document.createElement("form");a.setAttribute("id",h);a.setAttribute("method",f);a.setAttribute("action",b);a.setAttribute("target",c);if(e){a.setAttribute("accept-charset",e)}if(d==false||d=="hidden"){a.style.display="none"}document.body.appendChild(a);return a},loadCss:function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(b)},getRandom:function(b,a){return Math.floor(Math.random()*(a-b)+b)},bind:function(b,a,c){if(window.addEventListener){b.addEventListener(a,c,false)}else{b.attachEvent("on"+a,c)}},stopDefault:function(a){var a=a||window.event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},domReady:(function(){var f=false,e=[],b;if(document.addEventListener){b=function(){document.removeEventListener("DOMContentLoaded",b,false);c()}}else{if(document.attachEvent){b=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",b);c()}}}}var c=function(){if(!c.isReady){c.isReady=true;for(var k=0,h=e.length;k<h;k++){e[k]()}}};var a=function(){try{document.documentElement.doScroll("left")}catch(h){setTimeout(a,1);return}c()};function d(){if(f){return}f=true;if(document.readyState==="complete"){c.isReady=true}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false);window.addEventListener("load",c,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",b);window.attachEvent("onload",c);var h=false;try{h=window.frameElement==null}catch(j){}if(document.documentElement.doScroll&&h){a()}}}}}d();return function(h){c.isReady?h():e.push(h)}})()};BDBridge.Lib.define("BDBridge.Lib.json",function(b){var c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(h){if(/["\\\x00-\x1f]/.test(h)){h=h.replace(/["\\\x00-\x1f]/g,function(j){var k=c[j];if(k){return k}k=j.charCodeAt();return"\\u00"+Math.floor(k/16).toString(16)+(k%16).toString(16)})}return'"'+h+'"'}function e(o){var j=["["],k=o.length,h,m,n;for(m=0;m<k;m++){n=o[m];switch(typeof n){case"undefined":case"function":case"unknown":break;default:if(h){j.push(",")}j.push(b.stringify(n));h=1}}j.push("]");return j.join("")}function d(h){return h<10?"0"+h:h}function f(h){return'"'+h.getFullYear()+"-"+d(h.getMonth()+1)+"-"+d(h.getDate())+"T"+d(h.getHours())+":"+d(h.getMinutes())+":"+d(h.getSeconds())+'"'}b.parse=function(h){return(new Function("return ("+h+")"))()};b.stringify=function(n){switch(typeof n){case"undefined":return"undefined";case"number":return isFinite(n)?String(n):"null";case"string":return a(n);case"boolean":return String(n);default:if(n===null){return"null"}else{if(n instanceof Array){return e(n)}else{if(n instanceof Date){return f(n)}else{var j=["{"],m=BDBridge.Lib.json.stringify,h,l;for(var k in n){if(Object.prototype.hasOwnProperty.call(n,k)){l=n[k];switch(typeof l){case"undefined":case"unknown":case"function":break;default:if(h){j.push(",")}h=1;j.push(m(k)+":"+m(l))}}}j.push("}");return j.join("")}}}}}});BDBridge.Lib.init();